From 517e9e36f25d3b4aed7f8a2d87a9619185f4e634 Mon Sep 17 00:00:00 2001
From: "Aaron Sethman (androsyn)" <androsyn@ratbox.org>
Date: Tue, 29 Sep 2015 15:09:55 +0000
Subject: [PATCH 41/89] remove mostly unused monitor code

git-svn-id: http://svn.ratbox.org/svnroot/ircd-ratbox/branches/RATBOX_3_0@28671 b93f080a-4cfa-0310-a19a-80a68f531ef9
---
 Makefile.in               |  45 ++-
 aclocal.m4                | 880 ++--------------------------------------------
 bandb/Makefile.in         |  48 ++-
 bandb/sqlite3/Makefile.in |  32 +-
 contrib/Makefile.in       |  31 +-
 doc/example.conf          |   5 -
 help/Makefile.in          |  27 +-
 include/monitor.h         |  36 --
 include/s_conf.h          |   1 -
 include/send.h            |   3 -
 include/struct.h          |   3 -
 modules/Makefile.am       |   5 -
 modules/Makefile.in       | 114 +++---
 modules/core/m_nick.c     |   9 -
 modules/m_info.c          |   6 -
 modules/m_monitor.c       | 397 ---------------------
 modules/m_services.c      |   5 -
 modules/static_modules.c  |   2 -
 resolver/Makefile.in      |  32 +-
 src/Makefile.am           |   1 -
 src/Makefile.in           |  42 ++-
 src/client.c              |   3 -
 src/ircd.c                |   2 -
 src/monitor.c             | 154 --------
 src/newconf.c             |   1 -
 src/s_conf.c              |   1 -
 src/s_user.c              |   2 -
 src/send.c                |  35 --
 src/supported.c           |   3 +-
 ssld/Makefile.in          |  32 +-
 tools/Makefile.in         |  32 +-
 31 files changed, 353 insertions(+), 1636 deletions(-)
 delete mode 100644 include/monitor.h
 delete mode 100644 modules/m_monitor.c
 delete mode 100644 src/monitor.c

diff --git a/Makefile.in b/Makefile.in
index d76daf2..a2ac1de 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.11.3 from Makefile.am.
+# Makefile.in generated by automake 1.11.6 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -22,6 +22,23 @@
 # on each other now..
 
 VPATH = @srcdir@
+am__make_dryrun = \
+  { \
+    am__dry=no; \
+    case $$MAKEFLAGS in \
+      *\\[\ \	]*) \
+        echo 'am--echo: ; @echo "AM"  OK' | $(MAKE) -f - 2>/dev/null \
+          | grep '^AM OK$$' >/dev/null || am__dry=yes;; \
+      *) \
+        for am__flg in $$MAKEFLAGS; do \
+          case $$am__flg in \
+            *=*|--*) ;; \
+            *n*) am__dry=yes; break;; \
+          esac; \
+        done;; \
+    esac; \
+    test $$am__dry = yes; \
+  }
 pkgdatadir = $(datadir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
@@ -95,6 +112,11 @@ RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \
 	install-pdf-recursive install-ps-recursive install-recursive \
 	installcheck-recursive installdirs-recursive pdf-recursive \
 	ps-recursive uninstall-recursive
+am__can_run_installinfo = \
+  case $$AM_UPDATE_INFO_DIR in \
+    n|no|NO) false;; \
+    *) (install-info --version) >/dev/null 2>&1;; \
+  esac
 RECURSIVE_CLEAN_TARGETS = mostlyclean-recursive clean-recursive	\
   distclean-recursive maintainer-clean-recursive
 AM_RECURSIVE_TARGETS = $(RECURSIVE_TARGETS:-recursive=) \
@@ -193,8 +215,6 @@ LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
 LOG_DIR = @LOG_DIR@
-LTDLDEPS = @LTDLDEPS@
-LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
 LT_OBJDIR = @LT_OBJDIR@
 MAINT = @MAINT@
@@ -284,6 +304,7 @@ pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 psdir = @psdir@
+runstatedir = @runstatedir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 srcdir = @srcdir@
@@ -365,8 +386,11 @@ install-mod.sh: $(top_builddir)/config.status $(srcdir)/install-mod.sh.in
 	cd $(top_builddir) && $(SHELL) ./config.status $@
 install-binPROGRAMS: $(bin_PROGRAMS)
 	@$(NORMAL_INSTALL)
-	test -z "$(bindir)" || $(MKDIR_P) "$(DESTDIR)$(bindir)"
 	@list='$(bin_PROGRAMS)'; test -n "$(bindir)" || list=; \
+	if test -n "$$list"; then \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(bindir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(bindir)" || exit 1; \
+	fi; \
 	for p in $$list; do echo "$$p $$p"; done | \
 	sed 's/$(EXEEXT)$$//' | \
 	while read p p1; do if test -f $$p || test -f $$p1; \
@@ -620,13 +644,10 @@ distdir: $(DISTFILES)
 	done
 	@list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
 	  if test "$$subdir" = .; then :; else \
-	    test -d "$(distdir)/$$subdir" \
-	    || $(MKDIR_P) "$(distdir)/$$subdir" \
-	    || exit 1; \
-	  fi; \
-	done
-	@list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
-	  if test "$$subdir" = .; then :; else \
+	    $(am__make_dryrun) \
+	      || test -d "$(distdir)/$$subdir" \
+	      || $(MKDIR_P) "$(distdir)/$$subdir" \
+	      || exit 1; \
 	    dir1=$$subdir; dir2="$(distdir)/$$subdir"; \
 	    $(am__relativize); \
 	    new_distdir=$$reldir; \
@@ -712,7 +733,7 @@ distcheck: dist
 	*.zip*) \
 	  unzip $(distdir).zip ;;\
 	esac
-	chmod -R a-w $(distdir); chmod a+w $(distdir)
+	chmod -R a-w $(distdir); chmod u+w $(distdir)
 	mkdir $(distdir)/_build
 	mkdir $(distdir)/_inst
 	chmod a-w $(distdir)
diff --git a/aclocal.m4 b/aclocal.m4
index 30139c5..7419938 100644
--- a/aclocal.m4
+++ b/aclocal.m4
@@ -1,4 +1,4 @@
-# generated automatically by aclocal 1.11.3 -*- Autoconf -*-
+# generated automatically by aclocal 1.11.6 -*- Autoconf -*-
 
 # Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
 # 2005, 2006, 2007, 2008, 2009, 2010, 2011 Free Software Foundation,
@@ -14,8 +14,8 @@
 
 m4_ifndef([AC_AUTOCONF_VERSION],
   [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl
-m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.68],,
-[m4_warning([this file was generated for autoconf 2.68.
+m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.69],,
+[m4_warning([this file was generated for autoconf 2.69.
 You have another version of autoconf.  It may work, but is not guaranteed to.
 If you have problems, you may need to regenerate the build system entirely.
 To do so, use the procedure documented by the package, typically `autoreconf'.])])
@@ -1326,7 +1326,7 @@ ia64-*-hpux*)
   rm -rf conftest*
   ;;
 
-x86_64-*kfreebsd*-gnu|x86_64-*linux*|ppc*-*linux*|powerpc*-*linux*| \
+x86_64-*kfreebsd*-gnu|x86_64-*linux*|powerpc*-*linux*| \
 s390*-*linux*|s390*-*tpf*|sparc*-*linux*)
   # Find out which ABI we are using.
   echo 'int i;' > conftest.$ac_ext
@@ -1338,9 +1338,19 @@ s390*-*linux*|s390*-*tpf*|sparc*-*linux*)
 	    LD="${LD-ld} -m elf_i386_fbsd"
 	    ;;
 	  x86_64-*linux*)
-	    LD="${LD-ld} -m elf_i386"
+	    case `/usr/bin/file conftest.o` in
+	      *x86-64*)
+		LD="${LD-ld} -m elf32_x86_64"
+		;;
+	      *)
+		LD="${LD-ld} -m elf_i386"
+		;;
+	    esac
 	    ;;
-	  ppc64-*linux*|powerpc64-*linux*)
+	  powerpc64le-*)
+	    LD="${LD-ld} -m elf32lppclinux"
+	    ;;
+	  powerpc64-*)
 	    LD="${LD-ld} -m elf32ppclinux"
 	    ;;
 	  s390x-*linux*)
@@ -1359,7 +1369,10 @@ s390*-*linux*|s390*-*tpf*|sparc*-*linux*)
 	  x86_64-*linux*)
 	    LD="${LD-ld} -m elf_x86_64"
 	    ;;
-	  ppc*-*linux*|powerpc*-*linux*)
+	  powerpcle-*)
+	    LD="${LD-ld} -m elf64lppc"
+	    ;;
+	  powerpc-*)
 	    LD="${LD-ld} -m elf64ppc"
 	    ;;
 	  s390*-*linux*|s390*-*tpf*)
@@ -1702,7 +1715,8 @@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [dnl
     ;;
   *)
     lt_cv_sys_max_cmd_len=`(getconf ARG_MAX) 2> /dev/null`
-    if test -n "$lt_cv_sys_max_cmd_len"; then
+    if test -n "$lt_cv_sys_max_cmd_len" && \
+	test undefined != "$lt_cv_sys_max_cmd_len"; then
       lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
       lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \* 3`
     else
@@ -2526,17 +2540,6 @@ freebsd* | dragonfly*)
   esac
   ;;
 
-gnu*)
-  version_type=linux # correct to gnu/linux during the next big refactor
-  need_lib_prefix=no
-  need_version=no
-  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'
-  soname_spec='${libname}${release}${shared_ext}$major'
-  shlibpath_var=LD_LIBRARY_PATH
-  shlibpath_overrides_runpath=no
-  hardcode_into_libs=yes
-  ;;
-
 haiku*)
   version_type=linux # correct to gnu/linux during the next big refactor
   need_lib_prefix=no
@@ -2653,7 +2656,7 @@ linux*oldld* | linux*aout* | linux*coff*)
   ;;
 
 # This must be glibc/ELF.
-linux* | k*bsd*-gnu | kopensolaris*-gnu)
+linux* | k*bsd*-gnu | kopensolaris*-gnu | gnu*)
   version_type=linux # correct to gnu/linux during the next big refactor
   need_lib_prefix=no
   need_version=no
@@ -3269,10 +3272,6 @@ freebsd* | dragonfly*)
   fi
   ;;
 
-gnu*)
-  lt_cv_deplibs_check_method=pass_all
-  ;;
-
 haiku*)
   lt_cv_deplibs_check_method=pass_all
   ;;
@@ -3311,7 +3310,7 @@ irix5* | irix6* | nonstopux*)
   ;;
 
 # This must be glibc/ELF.
-linux* | k*bsd*-gnu | kopensolaris*-gnu)
+linux* | k*bsd*-gnu | kopensolaris*-gnu | gnu*)
   lt_cv_deplibs_check_method=pass_all
   ;;
 
@@ -4063,7 +4062,7 @@ m4_if([$1], [CXX], [
 	    ;;
 	esac
 	;;
-      linux* | k*bsd*-gnu | kopensolaris*-gnu)
+      linux* | k*bsd*-gnu | kopensolaris*-gnu | gnu*)
 	case $cc_basename in
 	  KCC*)
 	    # KAI C++ Compiler
@@ -4362,7 +4361,7 @@ m4_if([$1], [CXX], [
       _LT_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
       ;;
 
-    linux* | k*bsd*-gnu | kopensolaris*-gnu)
+    linux* | k*bsd*-gnu | kopensolaris*-gnu | gnu*)
       case $cc_basename in
       # old Intel for x86_64 which still supported -KPIC.
       ecc*)
@@ -6251,9 +6250,6 @@ if test "$_lt_caught_CXX_error" != yes; then
         _LT_TAGVAR(ld_shlibs, $1)=yes
         ;;
 
-      gnu*)
-        ;;
-
       haiku*)
         _LT_TAGVAR(archive_cmds, $1)='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname $wl$soname -o $lib'
         _LT_TAGVAR(link_all_deplibs, $1)=yes
@@ -6415,7 +6411,7 @@ if test "$_lt_caught_CXX_error" != yes; then
         _LT_TAGVAR(inherit_rpath, $1)=yes
         ;;
 
-      linux* | k*bsd*-gnu | kopensolaris*-gnu)
+      linux* | k*bsd*-gnu | kopensolaris*-gnu | gnu*)
         case $cc_basename in
           KCC*)
 	    # Kuck and Associates, Inc. (KAI) C++ Compiler
@@ -8000,824 +7996,6 @@ _LT_DECL([to_tool_file_cmd], [lt_cv_to_tool_file_cmd],
          [0], [convert $build files to toolchain format])dnl
 ])# _LT_PATH_CONVERSION_FUNCTIONS
 
-# ltdl.m4 - Configure ltdl for the target system. -*-Autoconf-*-
-#
-#   Copyright (C) 1999-2006, 2007, 2008, 2011 Free Software Foundation, Inc.
-#   Written by Thomas Tanner, 1999
-#
-# This file is free software; the Free Software Foundation gives
-# unlimited permission to copy and/or distribute it, with or without
-# modifications, as long as this notice is preserved.
-
-# serial 18 LTDL_INIT
-
-# LT_CONFIG_LTDL_DIR(DIRECTORY, [LTDL-MODE])
-# ------------------------------------------
-# DIRECTORY contains the libltdl sources.  It is okay to call this
-# function multiple times, as long as the same DIRECTORY is always given.
-AC_DEFUN([LT_CONFIG_LTDL_DIR],
-[AC_BEFORE([$0], [LTDL_INIT])
-_$0($*)
-])# LT_CONFIG_LTDL_DIR
-
-# We break this out into a separate macro, so that we can call it safely
-# internally without being caught accidentally by the sed scan in libtoolize.
-m4_defun([_LT_CONFIG_LTDL_DIR],
-[dnl remove trailing slashes
-m4_pushdef([_ARG_DIR], m4_bpatsubst([$1], [/*$]))
-m4_case(_LTDL_DIR,
-	[], [dnl only set lt_ltdl_dir if _ARG_DIR is not simply `.'
-	     m4_if(_ARG_DIR, [.],
-	             [],
-		 [m4_define([_LTDL_DIR], _ARG_DIR)
-	          _LT_SHELL_INIT([lt_ltdl_dir=']_ARG_DIR['])])],
-    [m4_if(_ARG_DIR, _LTDL_DIR,
-	    [],
-	[m4_fatal([multiple libltdl directories: `]_LTDL_DIR[', `]_ARG_DIR['])])])
-m4_popdef([_ARG_DIR])
-])# _LT_CONFIG_LTDL_DIR
-
-# Initialise:
-m4_define([_LTDL_DIR], [])
-
-
-# _LT_BUILD_PREFIX
-# ----------------
-# If Autoconf is new enough, expand to `${top_build_prefix}', otherwise
-# to `${top_builddir}/'.
-m4_define([_LT_BUILD_PREFIX],
-[m4_ifdef([AC_AUTOCONF_VERSION],
-   [m4_if(m4_version_compare(m4_defn([AC_AUTOCONF_VERSION]), [2.62]),
-	  [-1], [m4_ifdef([_AC_HAVE_TOP_BUILD_PREFIX],
-			  [${top_build_prefix}],
-			  [${top_builddir}/])],
-	  [${top_build_prefix}])],
-   [${top_builddir}/])[]dnl
-])
-
-
-# LTDL_CONVENIENCE
-# ----------------
-# sets LIBLTDL to the link flags for the libltdl convenience library and
-# LTDLINCL to the include flags for the libltdl header and adds
-# --enable-ltdl-convenience to the configure arguments.  Note that
-# AC_CONFIG_SUBDIRS is not called here.  LIBLTDL will be prefixed with
-# '${top_build_prefix}' if available, otherwise with '${top_builddir}/',
-# and LTDLINCL will be prefixed with '${top_srcdir}/' (note the single
-# quotes!).  If your package is not flat and you're not using automake,
-# define top_build_prefix, top_builddir, and top_srcdir appropriately
-# in your Makefiles.
-AC_DEFUN([LTDL_CONVENIENCE],
-[AC_BEFORE([$0], [LTDL_INIT])dnl
-dnl Although the argument is deprecated and no longer documented,
-dnl LTDL_CONVENIENCE used to take a DIRECTORY orgument, if we have one
-dnl here make sure it is the same as any other declaration of libltdl's
-dnl location!  This also ensures lt_ltdl_dir is set when configure.ac is
-dnl not yet using an explicit LT_CONFIG_LTDL_DIR.
-m4_ifval([$1], [_LT_CONFIG_LTDL_DIR([$1])])dnl
-_$0()
-])# LTDL_CONVENIENCE
-
-# AC_LIBLTDL_CONVENIENCE accepted a directory argument in older libtools,
-# now we have LT_CONFIG_LTDL_DIR:
-AU_DEFUN([AC_LIBLTDL_CONVENIENCE],
-[_LT_CONFIG_LTDL_DIR([m4_default([$1], [libltdl])])
-_LTDL_CONVENIENCE])
-
-dnl aclocal-1.4 backwards compatibility:
-dnl AC_DEFUN([AC_LIBLTDL_CONVENIENCE], [])
-
-
-# _LTDL_CONVENIENCE
-# -----------------
-# Code shared by LTDL_CONVENIENCE and LTDL_INIT([convenience]).
-m4_defun([_LTDL_CONVENIENCE],
-[case $enable_ltdl_convenience in
-  no) AC_MSG_ERROR([this package needs a convenience libltdl]) ;;
-  "") enable_ltdl_convenience=yes
-      ac_configure_args="$ac_configure_args --enable-ltdl-convenience" ;;
-esac
-LIBLTDL='_LT_BUILD_PREFIX'"${lt_ltdl_dir+$lt_ltdl_dir/}libltdlc.la"
-LTDLDEPS=$LIBLTDL
-LTDLINCL='-I${top_srcdir}'"${lt_ltdl_dir+/$lt_ltdl_dir}"
-
-AC_SUBST([LIBLTDL])
-AC_SUBST([LTDLDEPS])
-AC_SUBST([LTDLINCL])
-
-# For backwards non-gettext consistent compatibility...
-INCLTDL="$LTDLINCL"
-AC_SUBST([INCLTDL])
-])# _LTDL_CONVENIENCE
-
-
-# LTDL_INSTALLABLE
-# ----------------
-# sets LIBLTDL to the link flags for the libltdl installable library
-# and LTDLINCL to the include flags for the libltdl header and adds
-# --enable-ltdl-install to the configure arguments.  Note that
-# AC_CONFIG_SUBDIRS is not called from here.  If an installed libltdl
-# is not found, LIBLTDL will be prefixed with '${top_build_prefix}' if
-# available, otherwise with '${top_builddir}/', and LTDLINCL will be
-# prefixed with '${top_srcdir}/' (note the single quotes!).  If your
-# package is not flat and you're not using automake, define top_build_prefix,
-# top_builddir, and top_srcdir appropriately in your Makefiles.
-# In the future, this macro may have to be called after LT_INIT.
-AC_DEFUN([LTDL_INSTALLABLE],
-[AC_BEFORE([$0], [LTDL_INIT])dnl
-dnl Although the argument is deprecated and no longer documented,
-dnl LTDL_INSTALLABLE used to take a DIRECTORY orgument, if we have one
-dnl here make sure it is the same as any other declaration of libltdl's
-dnl location!  This also ensures lt_ltdl_dir is set when configure.ac is
-dnl not yet using an explicit LT_CONFIG_LTDL_DIR.
-m4_ifval([$1], [_LT_CONFIG_LTDL_DIR([$1])])dnl
-_$0()
-])# LTDL_INSTALLABLE
-
-# AC_LIBLTDL_INSTALLABLE accepted a directory argument in older libtools,
-# now we have LT_CONFIG_LTDL_DIR:
-AU_DEFUN([AC_LIBLTDL_INSTALLABLE],
-[_LT_CONFIG_LTDL_DIR([m4_default([$1], [libltdl])])
-_LTDL_INSTALLABLE])
-
-dnl aclocal-1.4 backwards compatibility:
-dnl AC_DEFUN([AC_LIBLTDL_INSTALLABLE], [])
-
-
-# _LTDL_INSTALLABLE
-# -----------------
-# Code shared by LTDL_INSTALLABLE and LTDL_INIT([installable]).
-m4_defun([_LTDL_INSTALLABLE],
-[if test -f $prefix/lib/libltdl.la; then
-  lt_save_LDFLAGS="$LDFLAGS"
-  LDFLAGS="-L$prefix/lib $LDFLAGS"
-  AC_CHECK_LIB([ltdl], [lt_dlinit], [lt_lib_ltdl=yes])
-  LDFLAGS="$lt_save_LDFLAGS"
-  if test x"${lt_lib_ltdl-no}" = xyes; then
-    if test x"$enable_ltdl_install" != xyes; then
-      # Don't overwrite $prefix/lib/libltdl.la without --enable-ltdl-install
-      AC_MSG_WARN([not overwriting libltdl at $prefix, force with `--enable-ltdl-install'])
-      enable_ltdl_install=no
-    fi
-  elif test x"$enable_ltdl_install" = xno; then
-    AC_MSG_WARN([libltdl not installed, but installation disabled])
-  fi
-fi
-
-# If configure.ac declared an installable ltdl, and the user didn't override
-# with --disable-ltdl-install, we will install the shipped libltdl.
-case $enable_ltdl_install in
-  no) ac_configure_args="$ac_configure_args --enable-ltdl-install=no"
-      LIBLTDL="-lltdl"
-      LTDLDEPS=
-      LTDLINCL=
-      ;;
-  *)  enable_ltdl_install=yes
-      ac_configure_args="$ac_configure_args --enable-ltdl-install"
-      LIBLTDL='_LT_BUILD_PREFIX'"${lt_ltdl_dir+$lt_ltdl_dir/}libltdl.la"
-      LTDLDEPS=$LIBLTDL
-      LTDLINCL='-I${top_srcdir}'"${lt_ltdl_dir+/$lt_ltdl_dir}"
-      ;;
-esac
-
-AC_SUBST([LIBLTDL])
-AC_SUBST([LTDLDEPS])
-AC_SUBST([LTDLINCL])
-
-# For backwards non-gettext consistent compatibility...
-INCLTDL="$LTDLINCL"
-AC_SUBST([INCLTDL])
-])# LTDL_INSTALLABLE
-
-
-# _LTDL_MODE_DISPATCH
-# -------------------
-m4_define([_LTDL_MODE_DISPATCH],
-[dnl If _LTDL_DIR is `.', then we are configuring libltdl itself:
-m4_if(_LTDL_DIR, [],
-	[],
-    dnl if _LTDL_MODE was not set already, the default value is `subproject':
-    [m4_case(m4_default(_LTDL_MODE, [subproject]),
-	  [subproject], [AC_CONFIG_SUBDIRS(_LTDL_DIR)
-			  _LT_SHELL_INIT([lt_dlopen_dir="$lt_ltdl_dir"])],
-	  [nonrecursive], [_LT_SHELL_INIT([lt_dlopen_dir="$lt_ltdl_dir"; lt_libobj_prefix="$lt_ltdl_dir/"])],
-	  [recursive], [],
-	[m4_fatal([unknown libltdl mode: ]_LTDL_MODE)])])dnl
-dnl Be careful not to expand twice:
-m4_define([$0], [])
-])# _LTDL_MODE_DISPATCH
-
-
-# _LT_LIBOBJ(MODULE_NAME)
-# -----------------------
-# Like AC_LIBOBJ, except that MODULE_NAME goes into _LT_LIBOBJS instead
-# of into LIBOBJS.
-AC_DEFUN([_LT_LIBOBJ], [
-  m4_pattern_allow([^_LT_LIBOBJS$])
-  _LT_LIBOBJS="$_LT_LIBOBJS $1.$ac_objext"
-])# _LT_LIBOBJS
-
-
-# LTDL_INIT([OPTIONS])
-# --------------------
-# Clients of libltdl can use this macro to allow the installer to
-# choose between a shipped copy of the ltdl sources or a preinstalled
-# version of the library.  If the shipped ltdl sources are not in a
-# subdirectory named libltdl, the directory name must be given by
-# LT_CONFIG_LTDL_DIR.
-AC_DEFUN([LTDL_INIT],
-[dnl Parse OPTIONS
-_LT_SET_OPTIONS([$0], [$1])
-
-dnl We need to keep our own list of libobjs separate from our parent project,
-dnl and the easiest way to do that is redefine the AC_LIBOBJs macro while
-dnl we look for our own LIBOBJs.
-m4_pushdef([AC_LIBOBJ], m4_defn([_LT_LIBOBJ]))
-m4_pushdef([AC_LIBSOURCES])
-
-dnl If not otherwise defined, default to the 1.5.x compatible subproject mode:
-m4_if(_LTDL_MODE, [],
-        [m4_define([_LTDL_MODE], m4_default([$2], [subproject]))
-        m4_if([-1], [m4_bregexp(_LTDL_MODE, [\(subproject\|\(non\)?recursive\)])],
-                [m4_fatal([unknown libltdl mode: ]_LTDL_MODE)])])
-
-AC_ARG_WITH([included_ltdl],
-    [AS_HELP_STRING([--with-included-ltdl],
-                    [use the GNU ltdl sources included here])])
-
-if test "x$with_included_ltdl" != xyes; then
-  # We are not being forced to use the included libltdl sources, so
-  # decide whether there is a useful installed version we can use.
-  AC_CHECK_HEADER([ltdl.h],
-      [AC_CHECK_DECL([lt_dlinterface_register],
-	   [AC_CHECK_LIB([ltdl], [lt_dladvise_preload],
-	       [with_included_ltdl=no],
-	       [with_included_ltdl=yes])],
-	   [with_included_ltdl=yes],
-	   [AC_INCLUDES_DEFAULT
-	    #include <ltdl.h>])],
-      [with_included_ltdl=yes],
-      [AC_INCLUDES_DEFAULT]
-  )
-fi
-
-dnl If neither LT_CONFIG_LTDL_DIR, LTDL_CONVENIENCE nor LTDL_INSTALLABLE
-dnl was called yet, then for old times' sake, we assume libltdl is in an
-dnl eponymous directory:
-AC_PROVIDE_IFELSE([LT_CONFIG_LTDL_DIR], [], [_LT_CONFIG_LTDL_DIR([libltdl])])
-
-AC_ARG_WITH([ltdl_include],
-    [AS_HELP_STRING([--with-ltdl-include=DIR],
-                    [use the ltdl headers installed in DIR])])
-
-if test -n "$with_ltdl_include"; then
-  if test -f "$with_ltdl_include/ltdl.h"; then :
-  else
-    AC_MSG_ERROR([invalid ltdl include directory: `$with_ltdl_include'])
-  fi
-else
-  with_ltdl_include=no
-fi
-
-AC_ARG_WITH([ltdl_lib],
-    [AS_HELP_STRING([--with-ltdl-lib=DIR],
-                    [use the libltdl.la installed in DIR])])
-
-if test -n "$with_ltdl_lib"; then
-  if test -f "$with_ltdl_lib/libltdl.la"; then :
-  else
-    AC_MSG_ERROR([invalid ltdl library directory: `$with_ltdl_lib'])
-  fi
-else
-  with_ltdl_lib=no
-fi
-
-case ,$with_included_ltdl,$with_ltdl_include,$with_ltdl_lib, in
-  ,yes,no,no,)
-	m4_case(m4_default(_LTDL_TYPE, [convenience]),
-	    [convenience], [_LTDL_CONVENIENCE],
-	    [installable], [_LTDL_INSTALLABLE],
-	  [m4_fatal([unknown libltdl build type: ]_LTDL_TYPE)])
-	;;
-  ,no,no,no,)
-	# If the included ltdl is not to be used, then use the
-	# preinstalled libltdl we found.
-	AC_DEFINE([HAVE_LTDL], [1],
-	  [Define this if a modern libltdl is already installed])
-	LIBLTDL=-lltdl
-	LTDLDEPS=
-	LTDLINCL=
-	;;
-  ,no*,no,*)
-	AC_MSG_ERROR([`--with-ltdl-include' and `--with-ltdl-lib' options must be used together])
-	;;
-  *)	with_included_ltdl=no
-	LIBLTDL="-L$with_ltdl_lib -lltdl"
-	LTDLDEPS=
-	LTDLINCL="-I$with_ltdl_include"
-	;;
-esac
-INCLTDL="$LTDLINCL"
-
-# Report our decision...
-AC_MSG_CHECKING([where to find libltdl headers])
-AC_MSG_RESULT([$LTDLINCL])
-AC_MSG_CHECKING([where to find libltdl library])
-AC_MSG_RESULT([$LIBLTDL])
-
-_LTDL_SETUP
-
-dnl restore autoconf definition.
-m4_popdef([AC_LIBOBJ])
-m4_popdef([AC_LIBSOURCES])
-
-AC_CONFIG_COMMANDS_PRE([
-    _ltdl_libobjs=
-    _ltdl_ltlibobjs=
-    if test -n "$_LT_LIBOBJS"; then
-      # Remove the extension.
-      _lt_sed_drop_objext='s/\.o$//;s/\.obj$//'
-      for i in `for i in $_LT_LIBOBJS; do echo "$i"; done | sed "$_lt_sed_drop_objext" | sort -u`; do
-        _ltdl_libobjs="$_ltdl_libobjs $lt_libobj_prefix$i.$ac_objext"
-        _ltdl_ltlibobjs="$_ltdl_ltlibobjs $lt_libobj_prefix$i.lo"
-      done
-    fi
-    AC_SUBST([ltdl_LIBOBJS], [$_ltdl_libobjs])
-    AC_SUBST([ltdl_LTLIBOBJS], [$_ltdl_ltlibobjs])
-])
-
-# Only expand once:
-m4_define([LTDL_INIT])
-])# LTDL_INIT
-
-# Old names:
-AU_DEFUN([AC_LIB_LTDL], [LTDL_INIT($@)])
-AU_DEFUN([AC_WITH_LTDL], [LTDL_INIT($@)])
-AU_DEFUN([LT_WITH_LTDL], [LTDL_INIT($@)])
-dnl aclocal-1.4 backwards compatibility:
-dnl AC_DEFUN([AC_LIB_LTDL], [])
-dnl AC_DEFUN([AC_WITH_LTDL], [])
-dnl AC_DEFUN([LT_WITH_LTDL], [])
-
-
-# _LTDL_SETUP
-# -----------
-# Perform all the checks necessary for compilation of the ltdl objects
-#  -- including compiler checks and header checks.  This is a public
-# interface  mainly for the benefit of libltdl's own configure.ac, most
-# other users should call LTDL_INIT instead.
-AC_DEFUN([_LTDL_SETUP],
-[AC_REQUIRE([AC_PROG_CC])dnl
-AC_REQUIRE([LT_SYS_MODULE_EXT])dnl
-AC_REQUIRE([LT_SYS_MODULE_PATH])dnl
-AC_REQUIRE([LT_SYS_DLSEARCH_PATH])dnl
-AC_REQUIRE([LT_LIB_DLLOAD])dnl
-AC_REQUIRE([LT_SYS_SYMBOL_USCORE])dnl
-AC_REQUIRE([LT_FUNC_DLSYM_USCORE])dnl
-AC_REQUIRE([LT_SYS_DLOPEN_DEPLIBS])dnl
-AC_REQUIRE([gl_FUNC_ARGZ])dnl
-
-m4_require([_LT_CHECK_OBJDIR])dnl
-m4_require([_LT_HEADER_DLFCN])dnl
-m4_require([_LT_CHECK_DLPREOPEN])dnl
-m4_require([_LT_DECL_SED])dnl
-
-dnl Don't require this, or it will be expanded earlier than the code
-dnl that sets the variables it relies on:
-_LT_ENABLE_INSTALL
-
-dnl _LTDL_MODE specific code must be called at least once:
-_LTDL_MODE_DISPATCH
-
-# In order that ltdl.c can compile, find out the first AC_CONFIG_HEADERS
-# the user used.  This is so that ltdl.h can pick up the parent projects
-# config.h file, The first file in AC_CONFIG_HEADERS must contain the
-# definitions required by ltdl.c.
-# FIXME: Remove use of undocumented AC_LIST_HEADERS (2.59 compatibility).
-AC_CONFIG_COMMANDS_PRE([dnl
-m4_pattern_allow([^LT_CONFIG_H$])dnl
-m4_ifset([AH_HEADER],
-    [LT_CONFIG_H=AH_HEADER],
-    [m4_ifset([AC_LIST_HEADERS],
-	    [LT_CONFIG_H=`echo "AC_LIST_HEADERS" | $SED 's,^[[      ]]*,,;s,[[ :]].*$,,'`],
-	[])])])
-AC_SUBST([LT_CONFIG_H])
-
-AC_CHECK_HEADERS([unistd.h dl.h sys/dl.h dld.h mach-o/dyld.h dirent.h],
-	[], [], [AC_INCLUDES_DEFAULT])
-
-AC_CHECK_FUNCS([closedir opendir readdir], [], [AC_LIBOBJ([lt__dirent])])
-AC_CHECK_FUNCS([strlcat strlcpy], [], [AC_LIBOBJ([lt__strl])])
-
-m4_pattern_allow([LT_LIBEXT])dnl
-AC_DEFINE_UNQUOTED([LT_LIBEXT],["$libext"],[The archive extension])
-
-name=
-eval "lt_libprefix=\"$libname_spec\""
-m4_pattern_allow([LT_LIBPREFIX])dnl
-AC_DEFINE_UNQUOTED([LT_LIBPREFIX],["$lt_libprefix"],[The archive prefix])
-
-name=ltdl
-eval "LTDLOPEN=\"$libname_spec\""
-AC_SUBST([LTDLOPEN])
-])# _LTDL_SETUP
-
-
-# _LT_ENABLE_INSTALL
-# ------------------
-m4_define([_LT_ENABLE_INSTALL],
-[AC_ARG_ENABLE([ltdl-install],
-    [AS_HELP_STRING([--enable-ltdl-install], [install libltdl])])
-
-case ,${enable_ltdl_install},${enable_ltdl_convenience} in
-  *yes*) ;;
-  *) enable_ltdl_convenience=yes ;;
-esac
-
-m4_ifdef([AM_CONDITIONAL],
-[AM_CONDITIONAL(INSTALL_LTDL, test x"${enable_ltdl_install-no}" != xno)
- AM_CONDITIONAL(CONVENIENCE_LTDL, test x"${enable_ltdl_convenience-no}" != xno)])
-])# _LT_ENABLE_INSTALL
-
-
-# LT_SYS_DLOPEN_DEPLIBS
-# ---------------------
-AC_DEFUN([LT_SYS_DLOPEN_DEPLIBS],
-[AC_REQUIRE([AC_CANONICAL_HOST])dnl
-AC_CACHE_CHECK([whether deplibs are loaded by dlopen],
-  [lt_cv_sys_dlopen_deplibs],
-  [# PORTME does your system automatically load deplibs for dlopen?
-  # or its logical equivalent (e.g. shl_load for HP-UX < 11)
-  # For now, we just catch OSes we know something about -- in the
-  # future, we'll try test this programmatically.
-  lt_cv_sys_dlopen_deplibs=unknown
-  case $host_os in
-  aix3*|aix4.1.*|aix4.2.*)
-    # Unknown whether this is true for these versions of AIX, but
-    # we want this `case' here to explicitly catch those versions.
-    lt_cv_sys_dlopen_deplibs=unknown
-    ;;
-  aix[[4-9]]*)
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  amigaos*)
-    case $host_cpu in
-    powerpc)
-      lt_cv_sys_dlopen_deplibs=no
-      ;;
-    esac
-    ;;
-  darwin*)
-    # Assuming the user has installed a libdl from somewhere, this is true
-    # If you are looking for one http://www.opendarwin.org/projects/dlcompat
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  freebsd* | dragonfly*)
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  gnu* | linux* | k*bsd*-gnu | kopensolaris*-gnu)
-    # GNU and its variants, using gnu ld.so (Glibc)
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  hpux10*|hpux11*)
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  interix*)
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  irix[[12345]]*|irix6.[[01]]*)
-    # Catch all versions of IRIX before 6.2, and indicate that we don't
-    # know how it worked for any of those versions.
-    lt_cv_sys_dlopen_deplibs=unknown
-    ;;
-  irix*)
-    # The case above catches anything before 6.2, and it's known that
-    # at 6.2 and later dlopen does load deplibs.
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  netbsd* | netbsdelf*-gnu)
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  openbsd*)
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  osf[[1234]]*)
-    # dlopen did load deplibs (at least at 4.x), but until the 5.x series,
-    # it did *not* use an RPATH in a shared library to find objects the
-    # library depends on, so we explicitly say `no'.
-    lt_cv_sys_dlopen_deplibs=no
-    ;;
-  osf5.0|osf5.0a|osf5.1)
-    # dlopen *does* load deplibs and with the right loader patch applied
-    # it even uses RPATH in a shared library to search for shared objects
-    # that the library depends on, but there's no easy way to know if that
-    # patch is installed.  Since this is the case, all we can really
-    # say is unknown -- it depends on the patch being installed.  If
-    # it is, this changes to `yes'.  Without it, it would be `no'.
-    lt_cv_sys_dlopen_deplibs=unknown
-    ;;
-  osf*)
-    # the two cases above should catch all versions of osf <= 5.1.  Read
-    # the comments above for what we know about them.
-    # At > 5.1, deplibs are loaded *and* any RPATH in a shared library
-    # is used to find them so we can finally say `yes'.
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  qnx*)
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  solaris*)
-    lt_cv_sys_dlopen_deplibs=yes
-    ;;
-  sysv5* | sco3.2v5* | sco5v6* | unixware* | OpenUNIX* | sysv4*uw2*)
-    libltdl_cv_sys_dlopen_deplibs=yes
-    ;;
-  esac
-  ])
-if test "$lt_cv_sys_dlopen_deplibs" != yes; then
- AC_DEFINE([LTDL_DLOPEN_DEPLIBS], [1],
-    [Define if the OS needs help to load dependent libraries for dlopen().])
-fi
-])# LT_SYS_DLOPEN_DEPLIBS
-
-# Old name:
-AU_ALIAS([AC_LTDL_SYS_DLOPEN_DEPLIBS], [LT_SYS_DLOPEN_DEPLIBS])
-dnl aclocal-1.4 backwards compatibility:
-dnl AC_DEFUN([AC_LTDL_SYS_DLOPEN_DEPLIBS], [])
-
-
-# LT_SYS_MODULE_EXT
-# -----------------
-AC_DEFUN([LT_SYS_MODULE_EXT],
-[m4_require([_LT_SYS_DYNAMIC_LINKER])dnl
-AC_CACHE_CHECK([which extension is used for runtime loadable modules],
-  [libltdl_cv_shlibext],
-[
-module=yes
-eval libltdl_cv_shlibext=$shrext_cmds
-module=no
-eval libltdl_cv_shrext=$shrext_cmds
-  ])
-if test -n "$libltdl_cv_shlibext"; then
-  m4_pattern_allow([LT_MODULE_EXT])dnl
-  AC_DEFINE_UNQUOTED([LT_MODULE_EXT], ["$libltdl_cv_shlibext"],
-    [Define to the extension used for runtime loadable modules, say, ".so".])
-fi
-if test "$libltdl_cv_shrext" != "$libltdl_cv_shlibext"; then
-  m4_pattern_allow([LT_SHARED_EXT])dnl
-  AC_DEFINE_UNQUOTED([LT_SHARED_EXT], ["$libltdl_cv_shrext"],
-    [Define to the shared library suffix, say, ".dylib".])
-fi
-])# LT_SYS_MODULE_EXT
-
-# Old name:
-AU_ALIAS([AC_LTDL_SHLIBEXT], [LT_SYS_MODULE_EXT])
-dnl aclocal-1.4 backwards compatibility:
-dnl AC_DEFUN([AC_LTDL_SHLIBEXT], [])
-
-
-# LT_SYS_MODULE_PATH
-# ------------------
-AC_DEFUN([LT_SYS_MODULE_PATH],
-[m4_require([_LT_SYS_DYNAMIC_LINKER])dnl
-AC_CACHE_CHECK([which variable specifies run-time module search path],
-  [lt_cv_module_path_var], [lt_cv_module_path_var="$shlibpath_var"])
-if test -n "$lt_cv_module_path_var"; then
-  m4_pattern_allow([LT_MODULE_PATH_VAR])dnl
-  AC_DEFINE_UNQUOTED([LT_MODULE_PATH_VAR], ["$lt_cv_module_path_var"],
-    [Define to the name of the environment variable that determines the run-time module search path.])
-fi
-])# LT_SYS_MODULE_PATH
-
-# Old name:
-AU_ALIAS([AC_LTDL_SHLIBPATH], [LT_SYS_MODULE_PATH])
-dnl aclocal-1.4 backwards compatibility:
-dnl AC_DEFUN([AC_LTDL_SHLIBPATH], [])
-
-
-# LT_SYS_DLSEARCH_PATH
-# --------------------
-AC_DEFUN([LT_SYS_DLSEARCH_PATH],
-[m4_require([_LT_SYS_DYNAMIC_LINKER])dnl
-AC_CACHE_CHECK([for the default library search path],
-  [lt_cv_sys_dlsearch_path],
-  [lt_cv_sys_dlsearch_path="$sys_lib_dlsearch_path_spec"])
-if test -n "$lt_cv_sys_dlsearch_path"; then
-  sys_dlsearch_path=
-  for dir in $lt_cv_sys_dlsearch_path; do
-    if test -z "$sys_dlsearch_path"; then
-      sys_dlsearch_path="$dir"
-    else
-      sys_dlsearch_path="$sys_dlsearch_path$PATH_SEPARATOR$dir"
-    fi
-  done
-  m4_pattern_allow([LT_DLSEARCH_PATH])dnl
-  AC_DEFINE_UNQUOTED([LT_DLSEARCH_PATH], ["$sys_dlsearch_path"],
-    [Define to the system default library search path.])
-fi
-])# LT_SYS_DLSEARCH_PATH
-
-# Old name:
-AU_ALIAS([AC_LTDL_SYSSEARCHPATH], [LT_SYS_DLSEARCH_PATH])
-dnl aclocal-1.4 backwards compatibility:
-dnl AC_DEFUN([AC_LTDL_SYSSEARCHPATH], [])
-
-
-# _LT_CHECK_DLPREOPEN
-# -------------------
-m4_defun([_LT_CHECK_DLPREOPEN],
-[m4_require([_LT_CMD_GLOBAL_SYMBOLS])dnl
-AC_CACHE_CHECK([whether libtool supports -dlopen/-dlpreopen],
-  [libltdl_cv_preloaded_symbols],
-  [if test -n "$lt_cv_sys_global_symbol_pipe"; then
-    libltdl_cv_preloaded_symbols=yes
-  else
-    libltdl_cv_preloaded_symbols=no
-  fi
-  ])
-if test x"$libltdl_cv_preloaded_symbols" = xyes; then
-  AC_DEFINE([HAVE_PRELOADED_SYMBOLS], [1],
-    [Define if libtool can extract symbol lists from object files.])
-fi
-])# _LT_CHECK_DLPREOPEN
-
-
-# LT_LIB_DLLOAD
-# -------------
-AC_DEFUN([LT_LIB_DLLOAD],
-[m4_pattern_allow([^LT_DLLOADERS$])
-LT_DLLOADERS=
-AC_SUBST([LT_DLLOADERS])
-
-AC_LANG_PUSH([C])
-
-LIBADD_DLOPEN=
-AC_SEARCH_LIBS([dlopen], [dl],
-	[AC_DEFINE([HAVE_LIBDL], [1],
-		   [Define if you have the libdl library or equivalent.])
-	if test "$ac_cv_search_dlopen" != "none required" ; then
-	  LIBADD_DLOPEN="-ldl"
-	fi
-	libltdl_cv_lib_dl_dlopen="yes"
-	LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}dlopen.la"],
-    [AC_LINK_IFELSE([AC_LANG_PROGRAM([[#if HAVE_DLFCN_H
-#  include <dlfcn.h>
-#endif
-    ]], [[dlopen(0, 0);]])],
-	    [AC_DEFINE([HAVE_LIBDL], [1],
-		       [Define if you have the libdl library or equivalent.])
-	    libltdl_cv_func_dlopen="yes"
-	    LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}dlopen.la"],
-	[AC_CHECK_LIB([svld], [dlopen],
-		[AC_DEFINE([HAVE_LIBDL], [1],
-			 [Define if you have the libdl library or equivalent.])
-	        LIBADD_DLOPEN="-lsvld" libltdl_cv_func_dlopen="yes"
-		LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}dlopen.la"])])])
-if test x"$libltdl_cv_func_dlopen" = xyes || test x"$libltdl_cv_lib_dl_dlopen" = xyes
-then
-  lt_save_LIBS="$LIBS"
-  LIBS="$LIBS $LIBADD_DLOPEN"
-  AC_CHECK_FUNCS([dlerror])
-  LIBS="$lt_save_LIBS"
-fi
-AC_SUBST([LIBADD_DLOPEN])
-
-LIBADD_SHL_LOAD=
-AC_CHECK_FUNC([shl_load],
-	[AC_DEFINE([HAVE_SHL_LOAD], [1],
-		   [Define if you have the shl_load function.])
-	LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}shl_load.la"],
-    [AC_CHECK_LIB([dld], [shl_load],
-	    [AC_DEFINE([HAVE_SHL_LOAD], [1],
-		       [Define if you have the shl_load function.])
-	    LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}shl_load.la"
-	    LIBADD_SHL_LOAD="-ldld"])])
-AC_SUBST([LIBADD_SHL_LOAD])
-
-case $host_os in
-darwin[[1567]].*)
-# We only want this for pre-Mac OS X 10.4.
-  AC_CHECK_FUNC([_dyld_func_lookup],
-	[AC_DEFINE([HAVE_DYLD], [1],
-		   [Define if you have the _dyld_func_lookup function.])
-	LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}dyld.la"])
-  ;;
-beos*)
-  LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}load_add_on.la"
-  ;;
-cygwin* | mingw* | os2* | pw32*)
-  AC_CHECK_DECLS([cygwin_conv_path], [], [], [[#include <sys/cygwin.h>]])
-  LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}loadlibrary.la"
-  ;;
-esac
-
-AC_CHECK_LIB([dld], [dld_link],
-	[AC_DEFINE([HAVE_DLD], [1],
-		   [Define if you have the GNU dld library.])
-		LT_DLLOADERS="$LT_DLLOADERS ${lt_dlopen_dir+$lt_dlopen_dir/}dld_link.la"])
-AC_SUBST([LIBADD_DLD_LINK])
-
-m4_pattern_allow([^LT_DLPREOPEN$])
-LT_DLPREOPEN=
-if test -n "$LT_DLLOADERS"
-then
-  for lt_loader in $LT_DLLOADERS; do
-    LT_DLPREOPEN="$LT_DLPREOPEN-dlpreopen $lt_loader "
-  done
-  AC_DEFINE([HAVE_LIBDLLOADER], [1],
-            [Define if libdlloader will be built on this platform])
-fi
-AC_SUBST([LT_DLPREOPEN])
-
-dnl This isn't used anymore, but set it for backwards compatibility
-LIBADD_DL="$LIBADD_DLOPEN $LIBADD_SHL_LOAD"
-AC_SUBST([LIBADD_DL])
-
-AC_LANG_POP
-])# LT_LIB_DLLOAD
-
-# Old name:
-AU_ALIAS([AC_LTDL_DLLIB], [LT_LIB_DLLOAD])
-dnl aclocal-1.4 backwards compatibility:
-dnl AC_DEFUN([AC_LTDL_DLLIB], [])
-
-
-# LT_SYS_SYMBOL_USCORE
-# --------------------
-# does the compiler prefix global symbols with an underscore?
-AC_DEFUN([LT_SYS_SYMBOL_USCORE],
-[m4_require([_LT_CMD_GLOBAL_SYMBOLS])dnl
-AC_CACHE_CHECK([for _ prefix in compiled symbols],
-  [lt_cv_sys_symbol_underscore],
-  [lt_cv_sys_symbol_underscore=no
-  cat > conftest.$ac_ext <<_LT_EOF
-void nm_test_func(){}
-int main(){nm_test_func;return 0;}
-_LT_EOF
-  if AC_TRY_EVAL(ac_compile); then
-    # Now try to grab the symbols.
-    ac_nlist=conftest.nm
-    if AC_TRY_EVAL(NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $ac_nlist) && test -s "$ac_nlist"; then
-      # See whether the symbols have a leading underscore.
-      if grep '^. _nm_test_func' "$ac_nlist" >/dev/null; then
-        lt_cv_sys_symbol_underscore=yes
-      else
-        if grep '^. nm_test_func ' "$ac_nlist" >/dev/null; then
-	  :
-        else
-	  echo "configure: cannot find nm_test_func in $ac_nlist" >&AS_MESSAGE_LOG_FD
-        fi
-      fi
-    else
-      echo "configure: cannot run $lt_cv_sys_global_symbol_pipe" >&AS_MESSAGE_LOG_FD
-    fi
-  else
-    echo "configure: failed program was:" >&AS_MESSAGE_LOG_FD
-    cat conftest.c >&AS_MESSAGE_LOG_FD
-  fi
-  rm -rf conftest*
-  ])
-  sys_symbol_underscore=$lt_cv_sys_symbol_underscore
-  AC_SUBST([sys_symbol_underscore])
-])# LT_SYS_SYMBOL_USCORE
-
-# Old name:
-AU_ALIAS([AC_LTDL_SYMBOL_USCORE], [LT_SYS_SYMBOL_USCORE])
-dnl aclocal-1.4 backwards compatibility:
-dnl AC_DEFUN([AC_LTDL_SYMBOL_USCORE], [])
-
-
-# LT_FUNC_DLSYM_USCORE
-# --------------------
-AC_DEFUN([LT_FUNC_DLSYM_USCORE],
-[AC_REQUIRE([LT_SYS_SYMBOL_USCORE])dnl
-if test x"$lt_cv_sys_symbol_underscore" = xyes; then
-  if test x"$libltdl_cv_func_dlopen" = xyes ||
-     test x"$libltdl_cv_lib_dl_dlopen" = xyes ; then
-	AC_CACHE_CHECK([whether we have to add an underscore for dlsym],
-	  [libltdl_cv_need_uscore],
-	  [libltdl_cv_need_uscore=unknown
-          save_LIBS="$LIBS"
-          LIBS="$LIBS $LIBADD_DLOPEN"
-	  _LT_TRY_DLOPEN_SELF(
-	    [libltdl_cv_need_uscore=no], [libltdl_cv_need_uscore=yes],
-	    [],				 [libltdl_cv_need_uscore=cross])
-	  LIBS="$save_LIBS"
-	])
-  fi
-fi
-
-if test x"$libltdl_cv_need_uscore" = xyes; then
-  AC_DEFINE([NEED_USCORE], [1],
-    [Define if dlsym() requires a leading underscore in symbol names.])
-fi
-])# LT_FUNC_DLSYM_USCORE
-
-# Old name:
-AU_ALIAS([AC_LTDL_DLSYM_USCORE], [LT_FUNC_DLSYM_USCORE])
-dnl aclocal-1.4 backwards compatibility:
-dnl AC_DEFUN([AC_LTDL_DLSYM_USCORE], [])
-
 # Helper functions for option handling.                    -*- Autoconf -*-
 #
 #   Copyright (C) 2004, 2005, 2007, 2008, 2009 Free Software Foundation,
@@ -9462,7 +8640,7 @@ AC_DEFUN([AM_AUTOMAKE_VERSION],
 [am__api_version='1.11'
 dnl Some users find AM_AUTOMAKE_VERSION and mistake it for a way to
 dnl require some minimum version.  Point them to the right macro.
-m4_if([$1], [1.11.3], [],
+m4_if([$1], [1.11.6], [],
       [AC_FATAL([Do not call $0, use AM_INIT_AUTOMAKE([$1]).])])dnl
 ])
 
@@ -9478,7 +8656,7 @@ m4_define([_AM_AUTOCONF_VERSION], [])
 # Call AM_AUTOMAKE_VERSION and AM_AUTOMAKE_VERSION so they can be traced.
 # This function is AC_REQUIREd by AM_INIT_AUTOMAKE.
 AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],
-[AM_AUTOMAKE_VERSION([1.11.3])dnl
+[AM_AUTOMAKE_VERSION([1.11.6])dnl
 m4_ifndef([AC_AUTOCONF_VERSION],
   [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl
 _AM_AUTOCONF_VERSION(m4_defn([AC_AUTOCONF_VERSION]))])
diff --git a/bandb/Makefile.in b/bandb/Makefile.in
index 9edf79a..6913ce7 100644
--- a/bandb/Makefile.in
+++ b/bandb/Makefile.in
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.11.3 from Makefile.am.
+# Makefile.in generated by automake 1.11.6 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -16,6 +16,23 @@
 @SET_MAKE@
 
 VPATH = @srcdir@
+am__make_dryrun = \
+  { \
+    am__dry=no; \
+    case $$MAKEFLAGS in \
+      *\\[\ \	]*) \
+        echo 'am--echo: ; @echo "AM"  OK' | $(MAKE) -f - 2>/dev/null \
+          | grep '^AM OK$$' >/dev/null || am__dry=yes;; \
+      *) \
+        for am__flg in $$MAKEFLAGS; do \
+          case $$am__flg in \
+            *=*|--*) ;; \
+            *n*) am__dry=yes; break;; \
+          esac; \
+        done;; \
+    esac; \
+    test $$am__dry = yes; \
+  }
 pkgdatadir = $(datadir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
@@ -79,6 +96,11 @@ RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \
 	install-pdf-recursive install-ps-recursive install-recursive \
 	installcheck-recursive installdirs-recursive pdf-recursive \
 	ps-recursive uninstall-recursive
+am__can_run_installinfo = \
+  case $$AM_UPDATE_INFO_DIR in \
+    n|no|NO) false;; \
+    *) (install-info --version) >/dev/null 2>&1;; \
+  esac
 RECURSIVE_CLEAN_TARGETS = mostlyclean-recursive clean-recursive	\
   distclean-recursive maintainer-clean-recursive
 AM_RECURSIVE_TARGETS = $(RECURSIVE_TARGETS:-recursive=) \
@@ -162,8 +184,6 @@ LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
 LOG_DIR = @LOG_DIR@
-LTDLDEPS = @LTDLDEPS@
-LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
 LT_OBJDIR = @LT_OBJDIR@
 MAINT = @MAINT@
@@ -253,6 +273,7 @@ pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 psdir = @psdir@
+runstatedir = @runstatedir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 srcdir = @srcdir@
@@ -310,8 +331,11 @@ $(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
 $(am__aclocal_m4_deps):
 install-binPROGRAMS: $(bin_PROGRAMS)
 	@$(NORMAL_INSTALL)
-	test -z "$(bindir)" || $(MKDIR_P) "$(DESTDIR)$(bindir)"
 	@list='$(bin_PROGRAMS)'; test -n "$(bindir)" || list=; \
+	if test -n "$$list"; then \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(bindir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(bindir)" || exit 1; \
+	fi; \
 	for p in $$list; do echo "$$p $$p"; done | \
 	sed 's/$(EXEEXT)$$//' | \
 	while read p p1; do if test -f $$p || test -f $$p1; \
@@ -353,8 +377,11 @@ clean-binPROGRAMS:
 	rm -f $$list
 install-libexecPROGRAMS: $(libexec_PROGRAMS)
 	@$(NORMAL_INSTALL)
-	test -z "$(libexecdir)" || $(MKDIR_P) "$(DESTDIR)$(libexecdir)"
 	@list='$(libexec_PROGRAMS)'; test -n "$(libexecdir)" || list=; \
+	if test -n "$$list"; then \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(libexecdir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(libexecdir)" || exit 1; \
+	fi; \
 	for p in $$list; do echo "$$p $$p"; done | \
 	sed 's/$(EXEEXT)$$//' | \
 	while read p p1; do if test -f $$p || test -f $$p1; \
@@ -609,13 +636,10 @@ distdir: $(DISTFILES)
 	done
 	@list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
 	  if test "$$subdir" = .; then :; else \
-	    test -d "$(distdir)/$$subdir" \
-	    || $(MKDIR_P) "$(distdir)/$$subdir" \
-	    || exit 1; \
-	  fi; \
-	done
-	@list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
-	  if test "$$subdir" = .; then :; else \
+	    $(am__make_dryrun) \
+	      || test -d "$(distdir)/$$subdir" \
+	      || $(MKDIR_P) "$(distdir)/$$subdir" \
+	      || exit 1; \
 	    dir1=$$subdir; dir2="$(distdir)/$$subdir"; \
 	    $(am__relativize); \
 	    new_distdir=$$reldir; \
diff --git a/bandb/sqlite3/Makefile.in b/bandb/sqlite3/Makefile.in
index 665591c..48c74a7 100644
--- a/bandb/sqlite3/Makefile.in
+++ b/bandb/sqlite3/Makefile.in
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.11.3 from Makefile.am.
+# Makefile.in generated by automake 1.11.6 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -16,6 +16,23 @@
 @SET_MAKE@
 
 VPATH = @srcdir@
+am__make_dryrun = \
+  { \
+    am__dry=no; \
+    case $$MAKEFLAGS in \
+      *\\[\ \	]*) \
+        echo 'am--echo: ; @echo "AM"  OK' | $(MAKE) -f - 2>/dev/null \
+          | grep '^AM OK$$' >/dev/null || am__dry=yes;; \
+      *) \
+        for am__flg in $$MAKEFLAGS; do \
+          case $$am__flg in \
+            *=*|--*) ;; \
+            *n*) am__dry=yes; break;; \
+          esac; \
+        done;; \
+    esac; \
+    test $$am__dry = yes; \
+  }
 pkgdatadir = $(datadir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
@@ -65,6 +82,11 @@ LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
 DIST_SOURCES = $(ratbox_sqlite3_SOURCES)
+am__can_run_installinfo = \
+  case $$AM_UPDATE_INFO_DIR in \
+    n|no|NO) false;; \
+    *) (install-info --version) >/dev/null 2>&1;; \
+  esac
 ETAGS = etags
 CTAGS = ctags
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
@@ -117,8 +139,6 @@ LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
 LOG_DIR = @LOG_DIR@
-LTDLDEPS = @LTDLDEPS@
-LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
 LT_OBJDIR = @LT_OBJDIR@
 MAINT = @MAINT@
@@ -208,6 +228,7 @@ pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 psdir = @psdir@
+runstatedir = @runstatedir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 srcdir = @srcdir@
@@ -258,8 +279,11 @@ $(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
 $(am__aclocal_m4_deps):
 install-binPROGRAMS: $(bin_PROGRAMS)
 	@$(NORMAL_INSTALL)
-	test -z "$(bindir)" || $(MKDIR_P) "$(DESTDIR)$(bindir)"
 	@list='$(bin_PROGRAMS)'; test -n "$(bindir)" || list=; \
+	if test -n "$$list"; then \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(bindir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(bindir)" || exit 1; \
+	fi; \
 	for p in $$list; do echo "$$p $$p"; done | \
 	sed 's/$(EXEEXT)$$//' | \
 	while read p p1; do if test -f $$p || test -f $$p1; \
diff --git a/contrib/Makefile.in b/contrib/Makefile.in
index dad44ea..8880008 100644
--- a/contrib/Makefile.in
+++ b/contrib/Makefile.in
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.11.3 from Makefile.am.
+# Makefile.in generated by automake 1.11.6 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -15,6 +15,23 @@
 
 @SET_MAKE@
 VPATH = @srcdir@
+am__make_dryrun = \
+  { \
+    am__dry=no; \
+    case $$MAKEFLAGS in \
+      *\\[\ \	]*) \
+        echo 'am--echo: ; @echo "AM"  OK' | $(MAKE) -f - 2>/dev/null \
+          | grep '^AM OK$$' >/dev/null || am__dry=yes;; \
+      *) \
+        for am__flg in $$MAKEFLAGS; do \
+          case $$am__flg in \
+            *=*|--*) ;; \
+            *n*) am__dry=yes; break;; \
+          esac; \
+        done;; \
+    esac; \
+    test $$am__dry = yes; \
+  }
 pkgdatadir = $(datadir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
@@ -46,6 +63,11 @@ CONFIG_CLEAN_FILES =
 CONFIG_CLEAN_VPATH_FILES =
 SOURCES =
 DIST_SOURCES =
+am__can_run_installinfo = \
+  case $$AM_UPDATE_INFO_DIR in \
+    n|no|NO) false;; \
+    *) (install-info --version) >/dev/null 2>&1;; \
+  esac
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
 ALLOCA = @ALLOCA@
@@ -96,8 +118,6 @@ LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
 LOG_DIR = @LOG_DIR@
-LTDLDEPS = @LTDLDEPS@
-LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
 LT_OBJDIR = @LT_OBJDIR@
 MAINT = @MAINT@
@@ -187,6 +207,7 @@ pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 psdir = @psdir@
+runstatedir = @runstatedir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 srcdir = @srcdir@
@@ -429,8 +450,8 @@ clean-generic:
 	$(LIBTOOL) --mode=clean $(RB_RM) -f $(S_OBJS) $(S_CORE_OBJS)  $(ST_OBJS)
 
 install_modules: $(S_OBJS)
-	-@@$(MKDIR_P) $(contribdir); \
-	for x in $(S_OBJS); do $(SHELL) ../install-mod.sh $$x $(contribdir);done
+	-@@$(MKDIR_P) $(DESTDIR)$(contribdir); \
+	for x in $(S_OBJS); do $(SHELL) ../install-mod.sh $$x $(DESTDIR)$(contribdir);done
 
 #install-mkdirs:
 #	@echo "ircd: setting up modular directory structure"
diff --git a/doc/example.conf b/doc/example.conf
index 001d583..a645379 100755
--- a/doc/example.conf
+++ b/doc/example.conf
@@ -745,11 +745,6 @@ general {
 	/* max accept: maximum allowed /accept's for +g usermode */
 	max_accept = 20;
 
-	/* max monitor: the maximum amount of nicknames a client may have in
-	 * their monitor (server-side notify) list.
-	 */
-	max_monitor = 100;
-
 	/* nick flood: enable the nickflood control code */
 	anti_nick_flood = yes;
 
diff --git a/help/Makefile.in b/help/Makefile.in
index 6692e7a..59641f9 100644
--- a/help/Makefile.in
+++ b/help/Makefile.in
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.11.3 from Makefile.am.
+# Makefile.in generated by automake 1.11.6 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -17,6 +17,23 @@
 
 # $Id$
 VPATH = @srcdir@
+am__make_dryrun = \
+  { \
+    am__dry=no; \
+    case $$MAKEFLAGS in \
+      *\\[\ \	]*) \
+        echo 'am--echo: ; @echo "AM"  OK' | $(MAKE) -f - 2>/dev/null \
+          | grep '^AM OK$$' >/dev/null || am__dry=yes;; \
+      *) \
+        for am__flg in $$MAKEFLAGS; do \
+          case $$am__flg in \
+            *=*|--*) ;; \
+            *n*) am__dry=yes; break;; \
+          esac; \
+        done;; \
+    esac; \
+    test $$am__dry = yes; \
+  }
 pkgdatadir = $(datadir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
@@ -48,6 +65,11 @@ CONFIG_CLEAN_FILES =
 CONFIG_CLEAN_VPATH_FILES =
 SOURCES =
 DIST_SOURCES =
+am__can_run_installinfo = \
+  case $$AM_UPDATE_INFO_DIR in \
+    n|no|NO) false;; \
+    *) (install-info --version) >/dev/null 2>&1;; \
+  esac
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
 ALLOCA = @ALLOCA@
@@ -98,8 +120,6 @@ LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
 LOG_DIR = @LOG_DIR@
-LTDLDEPS = @LTDLDEPS@
-LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
 LT_OBJDIR = @LT_OBJDIR@
 MAINT = @MAINT@
@@ -189,6 +209,7 @@ pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 psdir = @psdir@
+runstatedir = @runstatedir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 srcdir = @srcdir@
diff --git a/include/monitor.h b/include/monitor.h
deleted file mode 100644
index a8b5486..0000000
--- a/include/monitor.h
+++ /dev/null
@@ -1,36 +0,0 @@
-/* 
- * ircd-ratbox: an advanced Internet Relay Chat Daemon(ircd).
- * monitor.h: Code for server-side notify lists.
- *
- * Copyright (C) 2005 Lee Hardy <lee -at- leeh.co.uk>
- * Copyright (C) 2005-2012 ircd-ratbox development team
- *
- * $Id$
- */
-#ifndef INCLUDED_monitor_h
-#define INCLUDED_monitor_h
-
-struct BlockHeap;
-
-struct monitor
-{
-	struct monitor *hnext;
-	char name[NICKLEN];
-	rb_dlink_list users;
-};
-
-extern struct monitor *monitorTable[];
-
-#define MONITOR_HASH_BITS 16
-#define MONITOR_HASH_SIZE (1<<MONITOR_HASH_BITS)
-
-void init_monitor(void);
-struct monitor *find_monitor(const char *name, int add);
-void free_monitor(struct monitor *);
-
-void clear_monitor(struct Client *);
-
-void monitor_signon(struct Client *);
-void monitor_signoff(struct Client *);
-
-#endif
diff --git a/include/s_conf.h b/include/s_conf.h
index 124dde9..483a16b 100644
--- a/include/s_conf.h
+++ b/include/s_conf.h
@@ -150,7 +150,6 @@ struct config_file_entry
 	int anti_nick_flood;
 	int anti_spam_exit_message_time;
 	int max_accept;
-	int max_monitor;
 	int max_nick_time;
 	int max_nick_changes;
 	int ts_max_delta;
diff --git a/include/send.h b/include/send.h
index 60a9158..6a0b393 100644
--- a/include/send.h
+++ b/include/send.h
@@ -30,7 +30,6 @@
 struct Client;
 struct Channel;
 struct rb_dlink_list;
-struct monitor;
 
 void send_pop_queue(struct Client *);
 void
@@ -58,8 +57,6 @@ AFP(2, 3);
      void sendto_match_servs(struct Client *source_p, const char *mask,
 			     int capab, int, const char *, ...) AFP(5, 6);
 
-     void sendto_monitor(struct monitor *monptr, const char *, ...) AFP(2, 3);
-
      void sendto_anywhere(struct Client *, struct Client *, const char *,
 			  const char *, ...) AFP(4, 5);
 
diff --git a/include/struct.h b/include/struct.h
index a095a93..a73d52c 100644
--- a/include/struct.h
+++ b/include/struct.h
@@ -176,9 +176,6 @@ struct LocalUser
 	/* clients allowed to talk through +g */
 	rb_dlink_list allow_list;
 
-	/* nicknames theyre monitoring */
-	rb_dlink_list monitor_list;
-
 	rb_dlink_list invited;	/* chain of invite pointer blocks */
 
 	/*
diff --git a/modules/Makefile.am b/modules/Makefile.am
index a044695..e284ed9 100644
--- a/modules/Makefile.am
+++ b/modules/Makefile.am
@@ -53,7 +53,6 @@ m_list_la_LDFLAGS =  -module $(MODULE_FLAGS)
 m_locops_la_LDFLAGS =  -module $(MODULE_FLAGS)  
 m_lusers_la_LDFLAGS =  -module $(MODULE_FLAGS)  
 m_map_la_LDFLAGS =  -module $(MODULE_FLAGS)  
-m_monitor_la_LDFLAGS =  -module $(MODULE_FLAGS)  
 m_motd_la_LDFLAGS =  -module $(MODULE_FLAGS)  
 m_names_la_LDFLAGS =  -module $(MODULE_FLAGS)  
 m_oper_la_LDFLAGS =  -module $(MODULE_FLAGS) @SSL_LIBS@
@@ -108,7 +107,6 @@ m_list_la_SOURCES =	m_list.c
 m_locops_la_SOURCES =	m_locops.c
 m_lusers_la_SOURCES =	m_lusers.c
 m_map_la_SOURCES =	m_map.c
-m_monitor_la_SOURCES =	m_monitor.c
 m_motd_la_SOURCES =	m_motd.c
 m_names_la_SOURCES =	m_names.c
 m_oper_la_SOURCES =	m_oper.c
@@ -164,7 +162,6 @@ m_list_la_LIBADD = $(MODULE_LIBS)
 m_locops_la_LIBADD = $(MODULE_LIBS)     
 m_lusers_la_LIBADD = $(MODULE_LIBS)     
 m_map_la_LIBADD = $(MODULE_LIBS)     
-m_monitor_la_LIBADD = $(MODULE_LIBS)     
 m_motd_la_LIBADD = $(MODULE_LIBS)     
 m_names_la_LIBADD = $(MODULE_LIBS)     
 m_oper_la_LIBADD = $(MODULE_LIBS)     
@@ -248,7 +245,6 @@ m_list.la	\
 m_locops.la	\
 m_lusers.la	\
 m_map.la	\
-m_monitor.la	\
 m_motd.la	\
 m_names.la	\
 m_oper.la	\
@@ -370,7 +366,6 @@ m_list.c	\
 m_locops.c	\
 m_lusers.c	\
 m_map.c	\
-m_monitor.c	\
 m_motd.c	\
 m_names.c	\
 m_oper.c	\
diff --git a/modules/Makefile.in b/modules/Makefile.in
index edc0187..07c3899 100644
--- a/modules/Makefile.in
+++ b/modules/Makefile.in
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.11.3 from Makefile.am.
+# Makefile.in generated by automake 1.11.6 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -16,6 +16,23 @@
 @SET_MAKE@
 
 VPATH = @srcdir@
+am__make_dryrun = \
+  { \
+    am__dry=no; \
+    case $$MAKEFLAGS in \
+      *\\[\ \	]*) \
+        echo 'am--echo: ; @echo "AM"  OK' | $(MAKE) -f - 2>/dev/null \
+          | grep '^AM OK$$' >/dev/null || am__dry=yes;; \
+      *) \
+        for am__flg in $$MAKEFLAGS; do \
+          case $$am__flg in \
+            *=*|--*) ;; \
+            *n*) am__dry=yes; break;; \
+          esac; \
+        done;; \
+    esac; \
+    test $$am__dry = yes; \
+  }
 pkgdatadir = $(datadir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
@@ -193,10 +210,10 @@ am__libmodules_la_SOURCES_DIST = m_accept.c m_admin.c m_adminwall.c \
 	m_away.c m_capab.c m_cap.c m_close.c m_cmessage.c m_connect.c \
 	m_dline.c m_encap.c m_gline.c m_gungline.c m_help.c m_info.c \
 	m_invite.c m_ison.c m_kline.c m_knock.c m_links.c m_list.c \
-	m_locops.c m_lusers.c m_map.c m_monitor.c m_motd.c m_names.c \
-	m_oper.c m_operspy.c m_pass.c m_ping.c m_pong.c m_post.c \
-	m_rehash.c m_restart.c m_resv.c m_set.c m_stats.c m_svinfo.c \
-	m_tb.c m_testline.c m_testmask.c m_time.c m_topic.c m_trace.c \
+	m_locops.c m_lusers.c m_map.c m_motd.c m_names.c m_oper.c \
+	m_operspy.c m_pass.c m_ping.c m_pong.c m_post.c m_rehash.c \
+	m_restart.c m_resv.c m_set.c m_stats.c m_svinfo.c m_tb.c \
+	m_testline.c m_testmask.c m_time.c m_topic.c m_trace.c \
 	m_unreject.c m_user.c m_userhost.c m_version.c m_wallops.c \
 	m_who.c m_whois.c m_whowas.c m_xline.c core/m_die.c \
 	core/m_error.c core/m_join.c core/m_kick.c core/m_kill.c \
@@ -210,11 +227,11 @@ am__libmodules_la_SOURCES_DIST = m_accept.c m_admin.c m_adminwall.c \
 @STATIC_MODULES_TRUE@	m_info.lo m_invite.lo m_ison.lo \
 @STATIC_MODULES_TRUE@	m_kline.lo m_knock.lo m_links.lo \
 @STATIC_MODULES_TRUE@	m_list.lo m_locops.lo m_lusers.lo \
-@STATIC_MODULES_TRUE@	m_map.lo m_monitor.lo m_motd.lo \
-@STATIC_MODULES_TRUE@	m_names.lo m_oper.lo m_operspy.lo \
-@STATIC_MODULES_TRUE@	m_pass.lo m_ping.lo m_pong.lo m_post.lo \
-@STATIC_MODULES_TRUE@	m_rehash.lo m_restart.lo m_resv.lo \
-@STATIC_MODULES_TRUE@	m_set.lo m_stats.lo m_svinfo.lo m_tb.lo \
+@STATIC_MODULES_TRUE@	m_map.lo m_motd.lo m_names.lo m_oper.lo \
+@STATIC_MODULES_TRUE@	m_operspy.lo m_pass.lo m_ping.lo \
+@STATIC_MODULES_TRUE@	m_pong.lo m_post.lo m_rehash.lo \
+@STATIC_MODULES_TRUE@	m_restart.lo m_resv.lo m_set.lo \
+@STATIC_MODULES_TRUE@	m_stats.lo m_svinfo.lo m_tb.lo \
 @STATIC_MODULES_TRUE@	m_testline.lo m_testmask.lo m_time.lo \
 @STATIC_MODULES_TRUE@	m_topic.lo m_trace.lo m_unreject.lo \
 @STATIC_MODULES_TRUE@	m_user.lo m_userhost.lo m_version.lo \
@@ -432,15 +449,6 @@ m_map_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(m_map_la_LDFLAGS) \
 	$(LDFLAGS) -o $@
 @STATIC_MODULES_FALSE@am_m_map_la_rpath = -rpath $(modulesdir)
-@STATIC_MODULES_FALSE@m_monitor_la_DEPENDENCIES =  \
-@STATIC_MODULES_FALSE@	$(am__DEPENDENCIES_1)
-am__m_monitor_la_SOURCES_DIST = m_monitor.c
-@STATIC_MODULES_FALSE@am_m_monitor_la_OBJECTS = m_monitor.lo
-m_monitor_la_OBJECTS = $(am_m_monitor_la_OBJECTS)
-m_monitor_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
-	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
-	$(m_monitor_la_LDFLAGS) $(LDFLAGS) -o $@
-@STATIC_MODULES_FALSE@am_m_monitor_la_rpath = -rpath $(modulesdir)
 @STATIC_MODULES_FALSE@m_motd_la_DEPENDENCIES = $(am__DEPENDENCIES_1)
 am__m_motd_la_SOURCES_DIST = m_motd.c
 @STATIC_MODULES_FALSE@am_m_motd_la_OBJECTS = m_motd.lo
@@ -726,21 +734,21 @@ SOURCES = $(core_m_die_la_SOURCES) $(core_m_error_la_SOURCES) \
 	$(m_knock_la_SOURCES) $(m_links_la_SOURCES) \
 	$(m_list_la_SOURCES) $(m_locops_la_SOURCES) \
 	$(m_lusers_la_SOURCES) $(m_map_la_SOURCES) \
-	$(m_monitor_la_SOURCES) $(m_motd_la_SOURCES) \
-	$(m_names_la_SOURCES) $(m_oper_la_SOURCES) \
-	$(m_operspy_la_SOURCES) $(m_pass_la_SOURCES) \
-	$(m_ping_la_SOURCES) $(m_pong_la_SOURCES) $(m_post_la_SOURCES) \
-	$(m_rehash_la_SOURCES) $(m_restart_la_SOURCES) \
-	$(m_resv_la_SOURCES) $(m_services_la_SOURCES) \
-	$(m_set_la_SOURCES) $(m_stats_la_SOURCES) \
-	$(m_svinfo_la_SOURCES) $(m_tb_la_SOURCES) \
-	$(m_testline_la_SOURCES) $(m_testmask_la_SOURCES) \
-	$(m_time_la_SOURCES) $(m_topic_la_SOURCES) \
-	$(m_trace_la_SOURCES) $(m_unreject_la_SOURCES) \
-	$(m_user_la_SOURCES) $(m_userhost_la_SOURCES) \
-	$(m_version_la_SOURCES) $(m_wallops_la_SOURCES) \
-	$(m_who_la_SOURCES) $(m_whois_la_SOURCES) \
-	$(m_whowas_la_SOURCES) $(m_xline_la_SOURCES)
+	$(m_motd_la_SOURCES) $(m_names_la_SOURCES) \
+	$(m_oper_la_SOURCES) $(m_operspy_la_SOURCES) \
+	$(m_pass_la_SOURCES) $(m_ping_la_SOURCES) $(m_pong_la_SOURCES) \
+	$(m_post_la_SOURCES) $(m_rehash_la_SOURCES) \
+	$(m_restart_la_SOURCES) $(m_resv_la_SOURCES) \
+	$(m_services_la_SOURCES) $(m_set_la_SOURCES) \
+	$(m_stats_la_SOURCES) $(m_svinfo_la_SOURCES) \
+	$(m_tb_la_SOURCES) $(m_testline_la_SOURCES) \
+	$(m_testmask_la_SOURCES) $(m_time_la_SOURCES) \
+	$(m_topic_la_SOURCES) $(m_trace_la_SOURCES) \
+	$(m_unreject_la_SOURCES) $(m_user_la_SOURCES) \
+	$(m_userhost_la_SOURCES) $(m_version_la_SOURCES) \
+	$(m_wallops_la_SOURCES) $(m_who_la_SOURCES) \
+	$(m_whois_la_SOURCES) $(m_whowas_la_SOURCES) \
+	$(m_xline_la_SOURCES)
 DIST_SOURCES = $(am__core_m_die_la_SOURCES_DIST) \
 	$(am__core_m_error_la_SOURCES_DIST) \
 	$(am__core_m_join_la_SOURCES_DIST) \
@@ -769,11 +777,11 @@ DIST_SOURCES = $(am__core_m_die_la_SOURCES_DIST) \
 	$(am__m_links_la_SOURCES_DIST) $(am__m_list_la_SOURCES_DIST) \
 	$(am__m_locops_la_SOURCES_DIST) \
 	$(am__m_lusers_la_SOURCES_DIST) $(am__m_map_la_SOURCES_DIST) \
-	$(am__m_monitor_la_SOURCES_DIST) $(am__m_motd_la_SOURCES_DIST) \
-	$(am__m_names_la_SOURCES_DIST) $(am__m_oper_la_SOURCES_DIST) \
-	$(am__m_operspy_la_SOURCES_DIST) $(am__m_pass_la_SOURCES_DIST) \
-	$(am__m_ping_la_SOURCES_DIST) $(am__m_pong_la_SOURCES_DIST) \
-	$(am__m_post_la_SOURCES_DIST) $(am__m_rehash_la_SOURCES_DIST) \
+	$(am__m_motd_la_SOURCES_DIST) $(am__m_names_la_SOURCES_DIST) \
+	$(am__m_oper_la_SOURCES_DIST) $(am__m_operspy_la_SOURCES_DIST) \
+	$(am__m_pass_la_SOURCES_DIST) $(am__m_ping_la_SOURCES_DIST) \
+	$(am__m_pong_la_SOURCES_DIST) $(am__m_post_la_SOURCES_DIST) \
+	$(am__m_rehash_la_SOURCES_DIST) \
 	$(am__m_restart_la_SOURCES_DIST) $(am__m_resv_la_SOURCES_DIST) \
 	$(am__m_services_la_SOURCES_DIST) $(am__m_set_la_SOURCES_DIST) \
 	$(am__m_stats_la_SOURCES_DIST) $(am__m_svinfo_la_SOURCES_DIST) \
@@ -788,6 +796,11 @@ DIST_SOURCES = $(am__core_m_die_la_SOURCES_DIST) \
 	$(am__m_wallops_la_SOURCES_DIST) $(am__m_who_la_SOURCES_DIST) \
 	$(am__m_whois_la_SOURCES_DIST) $(am__m_whowas_la_SOURCES_DIST) \
 	$(am__m_xline_la_SOURCES_DIST)
+am__can_run_installinfo = \
+  case $$AM_UPDATE_INFO_DIR in \
+    n|no|NO) false;; \
+    *) (install-info --version) >/dev/null 2>&1;; \
+  esac
 ETAGS = etags
 CTAGS = ctags
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
@@ -840,8 +853,6 @@ LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
 LOG_DIR = @LOG_DIR@
-LTDLDEPS = @LTDLDEPS@
-LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
 LT_OBJDIR = @LT_OBJDIR@
 MAINT = @MAINT@
@@ -931,6 +942,7 @@ pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 psdir = @psdir@
+runstatedir = @runstatedir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 srcdir = @srcdir@
@@ -975,7 +987,6 @@ MODULE_FLAGS = $(EXTRA_FLAGS) -avoid-version
 @STATIC_MODULES_FALSE@m_locops_la_LDFLAGS = -module $(MODULE_FLAGS)  
 @STATIC_MODULES_FALSE@m_lusers_la_LDFLAGS = -module $(MODULE_FLAGS)  
 @STATIC_MODULES_FALSE@m_map_la_LDFLAGS = -module $(MODULE_FLAGS)  
-@STATIC_MODULES_FALSE@m_monitor_la_LDFLAGS = -module $(MODULE_FLAGS)  
 @STATIC_MODULES_FALSE@m_motd_la_LDFLAGS = -module $(MODULE_FLAGS)  
 @STATIC_MODULES_FALSE@m_names_la_LDFLAGS = -module $(MODULE_FLAGS)  
 @STATIC_MODULES_FALSE@m_oper_la_LDFLAGS = -module $(MODULE_FLAGS) @SSL_LIBS@
@@ -1029,7 +1040,6 @@ MODULE_FLAGS = $(EXTRA_FLAGS) -avoid-version
 @STATIC_MODULES_FALSE@m_locops_la_SOURCES = m_locops.c
 @STATIC_MODULES_FALSE@m_lusers_la_SOURCES = m_lusers.c
 @STATIC_MODULES_FALSE@m_map_la_SOURCES = m_map.c
-@STATIC_MODULES_FALSE@m_monitor_la_SOURCES = m_monitor.c
 @STATIC_MODULES_FALSE@m_motd_la_SOURCES = m_motd.c
 @STATIC_MODULES_FALSE@m_names_la_SOURCES = m_names.c
 @STATIC_MODULES_FALSE@m_oper_la_SOURCES = m_oper.c
@@ -1083,7 +1093,6 @@ MODULE_FLAGS = $(EXTRA_FLAGS) -avoid-version
 @STATIC_MODULES_FALSE@m_locops_la_LIBADD = $(MODULE_LIBS)     
 @STATIC_MODULES_FALSE@m_lusers_la_LIBADD = $(MODULE_LIBS)     
 @STATIC_MODULES_FALSE@m_map_la_LIBADD = $(MODULE_LIBS)     
-@STATIC_MODULES_FALSE@m_monitor_la_LIBADD = $(MODULE_LIBS)     
 @STATIC_MODULES_FALSE@m_motd_la_LIBADD = $(MODULE_LIBS)     
 @STATIC_MODULES_FALSE@m_names_la_LIBADD = $(MODULE_LIBS)     
 @STATIC_MODULES_FALSE@m_oper_la_LIBADD = $(MODULE_LIBS)     
@@ -1162,7 +1171,6 @@ MODULE_FLAGS = $(EXTRA_FLAGS) -avoid-version
 @STATIC_MODULES_FALSE@m_locops.la	\
 @STATIC_MODULES_FALSE@m_lusers.la	\
 @STATIC_MODULES_FALSE@m_map.la	\
-@STATIC_MODULES_FALSE@m_monitor.la	\
 @STATIC_MODULES_FALSE@m_motd.la	\
 @STATIC_MODULES_FALSE@m_names.la	\
 @STATIC_MODULES_FALSE@m_oper.la	\
@@ -1248,7 +1256,6 @@ MODULE_FLAGS = $(EXTRA_FLAGS) -avoid-version
 @STATIC_MODULES_TRUE@m_locops.c	\
 @STATIC_MODULES_TRUE@m_lusers.c	\
 @STATIC_MODULES_TRUE@m_map.c	\
-@STATIC_MODULES_TRUE@m_monitor.c	\
 @STATIC_MODULES_TRUE@m_motd.c	\
 @STATIC_MODULES_TRUE@m_names.c	\
 @STATIC_MODULES_TRUE@m_oper.c	\
@@ -1333,7 +1340,6 @@ $(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
 $(am__aclocal_m4_deps):
 @STATIC_MODULES_TRUE@install-coreLTLIBRARIES: $(core_LTLIBRARIES)
 @STATIC_MODULES_TRUE@	@$(NORMAL_INSTALL)
-@STATIC_MODULES_TRUE@	test -z "$(coredir)" || $(MKDIR_P) "$(DESTDIR)$(coredir)"
 	@list='$(core_LTLIBRARIES)'; test -n "$(coredir)" || list=; \
 	list2=; for p in $$list; do \
 	  if test -f $$p; then \
@@ -1341,6 +1347,8 @@ $(am__aclocal_m4_deps):
 	  else :; fi; \
 	done; \
 	test -z "$$list2" || { \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(coredir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(coredir)" || exit 1; \
 	  echo " $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 '$(DESTDIR)$(coredir)'"; \
 	  $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 "$(DESTDIR)$(coredir)"; \
 	}
@@ -1364,7 +1372,6 @@ clean-coreLTLIBRARIES:
 	done
 install-libmodulesLTLIBRARIES: $(libmodules_LTLIBRARIES)
 	@$(NORMAL_INSTALL)
-	test -z "$(libmodulesdir)" || $(MKDIR_P) "$(DESTDIR)$(libmodulesdir)"
 	@list='$(libmodules_LTLIBRARIES)'; test -n "$(libmodulesdir)" || list=; \
 	list2=; for p in $$list; do \
 	  if test -f $$p; then \
@@ -1372,6 +1379,8 @@ install-libmodulesLTLIBRARIES: $(libmodules_LTLIBRARIES)
 	  else :; fi; \
 	done; \
 	test -z "$$list2" || { \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(libmodulesdir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(libmodulesdir)" || exit 1; \
 	  echo " $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 '$(DESTDIR)$(libmodulesdir)'"; \
 	  $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 "$(DESTDIR)$(libmodulesdir)"; \
 	}
@@ -1395,7 +1404,6 @@ clean-libmodulesLTLIBRARIES:
 	done
 @STATIC_MODULES_TRUE@install-modulesLTLIBRARIES: $(modules_LTLIBRARIES)
 @STATIC_MODULES_TRUE@	@$(NORMAL_INSTALL)
-@STATIC_MODULES_TRUE@	test -z "$(modulesdir)" || $(MKDIR_P) "$(DESTDIR)$(modulesdir)"
 	@list='$(modules_LTLIBRARIES)'; test -n "$(modulesdir)" || list=; \
 	list2=; for p in $$list; do \
 	  if test -f $$p; then \
@@ -1403,6 +1411,8 @@ clean-libmodulesLTLIBRARIES:
 	  else :; fi; \
 	done; \
 	test -z "$$list2" || { \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(modulesdir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(modulesdir)" || exit 1; \
 	  echo " $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 '$(DESTDIR)$(modulesdir)'"; \
 	  $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 "$(DESTDIR)$(modulesdir)"; \
 	}
@@ -1426,7 +1436,6 @@ clean-modulesLTLIBRARIES:
 	done
 install-servicesLTLIBRARIES: $(services_LTLIBRARIES)
 	@$(NORMAL_INSTALL)
-	test -z "$(servicesdir)" || $(MKDIR_P) "$(DESTDIR)$(servicesdir)"
 	@list='$(services_LTLIBRARIES)'; test -n "$(servicesdir)" || list=; \
 	list2=; for p in $$list; do \
 	  if test -f $$p; then \
@@ -1434,6 +1443,8 @@ install-servicesLTLIBRARIES: $(services_LTLIBRARIES)
 	  else :; fi; \
 	done; \
 	test -z "$$list2" || { \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(servicesdir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(servicesdir)" || exit 1; \
 	  echo " $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 '$(DESTDIR)$(servicesdir)'"; \
 	  $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 "$(DESTDIR)$(servicesdir)"; \
 	}
@@ -1547,8 +1558,6 @@ m_lusers.la: $(m_lusers_la_OBJECTS) $(m_lusers_la_DEPENDENCIES) $(EXTRA_m_lusers
 	$(m_lusers_la_LINK) $(am_m_lusers_la_rpath) $(m_lusers_la_OBJECTS) $(m_lusers_la_LIBADD) $(LIBS)
 m_map.la: $(m_map_la_OBJECTS) $(m_map_la_DEPENDENCIES) $(EXTRA_m_map_la_DEPENDENCIES) 
 	$(m_map_la_LINK) $(am_m_map_la_rpath) $(m_map_la_OBJECTS) $(m_map_la_LIBADD) $(LIBS)
-m_monitor.la: $(m_monitor_la_OBJECTS) $(m_monitor_la_DEPENDENCIES) $(EXTRA_m_monitor_la_DEPENDENCIES) 
-	$(m_monitor_la_LINK) $(am_m_monitor_la_rpath) $(m_monitor_la_OBJECTS) $(m_monitor_la_LIBADD) $(LIBS)
 m_motd.la: $(m_motd_la_OBJECTS) $(m_motd_la_DEPENDENCIES) $(EXTRA_m_motd_la_DEPENDENCIES) 
 	$(m_motd_la_LINK) $(am_m_motd_la_rpath) $(m_motd_la_OBJECTS) $(m_motd_la_LIBADD) $(LIBS)
 m_names.la: $(m_names_la_OBJECTS) $(m_names_la_DEPENDENCIES) $(EXTRA_m_names_la_DEPENDENCIES) 
@@ -1664,7 +1673,6 @@ distclean-compile:
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/m_locops.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/m_lusers.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/m_map.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/m_monitor.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/m_motd.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/m_names.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/m_oper.Plo@am__quote@
diff --git a/modules/core/m_nick.c b/modules/core/m_nick.c
index 79eef15..0d9b56a 100644
--- a/modules/core/m_nick.c
+++ b/modules/core/m_nick.c
@@ -44,7 +44,6 @@
 #include "modules.h"
 #include "scache.h"
 #include "s_newconf.h"
-#include "monitor.h"
 #include "reject.h"
 
 /* Give all UID nicks the same TS. This ensures nick TS is always the same on
@@ -673,7 +672,6 @@ change_local_nick(struct Client *client_p, struct Client *source_p, char *nick,
 			source_p->tsinfo++;
 		else
 			source_p->tsinfo = rb_current_time();
-		monitor_signoff(source_p);
 		/* we only do bancache for local users -- jilles */
 		if(source_p->user)
 			invalidate_bancache_user(source_p);
@@ -706,8 +704,6 @@ change_local_nick(struct Client *client_p, struct Client *source_p, char *nick,
 	strcpy(source_p->user->name, nick);
 	add_to_hash(HASH_CLIENT, nick, source_p);
 
-	if(!samenick)
-		monitor_signon(source_p);
 
 	/* we used to call del_all_accepts() here, but theres no real reason
 	 * to clear a clients own list of accepted clients.  So just remove
@@ -741,7 +737,6 @@ change_remote_nick(struct Client *client_p, struct Client *source_p,
 	if(!samenick)
 	{
 		source_p->tsinfo = newts ? newts : rb_current_time();
-		monitor_signoff(source_p);
 	}
 
 	sendto_common_channels_local(source_p, ":%s!%s@%s NICK :%s",
@@ -768,9 +763,6 @@ change_remote_nick(struct Client *client_p, struct Client *source_p,
 	strcpy(source_p->user->name, nick);
 	add_to_hash(HASH_CLIENT, nick, source_p);
 
-	if(!samenick)
-		monitor_signon(source_p);
-
 	/* remove all accepts pointing to the client */
 	del_all_accepts(source_p);
 
@@ -1092,7 +1084,6 @@ register_client(struct Client *client_p, struct Client *server,
 	add_to_hash(HASH_CLIENT, nick, source_p);
 	add_to_hash(HASH_HOSTNAME, source_p->host, source_p);
 	inc_global_cidr_count(source_p);
-	monitor_signon(source_p);
 
 	m = &parv[4][1];
 	while(*m)
diff --git a/modules/m_info.c b/modules/m_info.c
index f7279f6..df6e1d5 100644
--- a/modules/m_info.c
+++ b/modules/m_info.c
@@ -534,12 +534,6 @@ static struct InfoStruct info_table[] = {
 		{ &ConfigFileEntry.max_accept }, 
 		"Maximum nicknames on accept list",
 	},
- 	{
-		"max_monitor",
-		OUTPUT_DECIMAL,
-		{ &ConfigFileEntry.max_monitor },
-		"Maximum nicknames on monitor list"
-	},	
 	{
 		"max_nick_changes",
 		OUTPUT_DECIMAL,
diff --git a/modules/m_monitor.c b/modules/m_monitor.c
deleted file mode 100644
index 7f0517a..0000000
--- a/modules/m_monitor.c
+++ /dev/null
@@ -1,397 +0,0 @@
-/* modules/m_monitor.c
- * 
- *  Copyright (C) 2005 Lee Hardy <lee@leeh.co.uk>
- *  Copyright (C) 2005-2012 ircd-ratbox development team
- *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions are
- * met:
- *
- * 1.Redistributions of source code must retain the above copyright notice,
- *   this list of conditions and the following disclaimer.
- * 2.Redistributions in binary form must reproduce the above copyright
- *   notice, this list of conditions and the following disclaimer in the
- *   documentation and/or other materials provided with the distribution.
- * 3.The name of the author may not be used to endorse or promote products
- *   derived from this software without specific prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
- * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
- * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
- * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
- * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
- * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
- * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
- * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
- * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
- * POSSIBILITY OF SUCH DAMAGE.
- *
- * $Id$
- */
-
-#include "stdinc.h"
-#include "struct.h"
-#include "client.h"
-#include "parse.h"
-#include "modules.h"
-#include "monitor.h"
-#include "numeric.h"
-#include "s_conf.h"
-#include "ircd.h"
-#include "match.h"
-#include "send.h"
-
-static int m_monitor(struct Client *, struct Client *, int, const char **);
-
-static int modinit(void);
-static void moddeinit(void);
-static void cleanup_monitor(void *unused);
-
-struct Message monitor_msgtab = {
-	"MONITOR", 0, 0, 0, MFLG_SLOW,
-	{mg_unreg, {m_monitor, 2}, mg_ignore, mg_ignore, mg_ignore, {m_monitor, 2}}
-};
-
-
-
-mapi_clist_av1 monitor_clist[] = { &monitor_msgtab, NULL };
-
-DECLARE_MODULE_AV1(monitor, modinit, moddeinit, monitor_clist, NULL, NULL, "$Revision$");
-
-static struct ev_entry *cleanup_monitor_ev;
-static int
-modinit(void)
-{
-	cleanup_monitor_ev = rb_event_addish("cleanup_monitor", cleanup_monitor, NULL, 3600);
-	return 0;
-
-}
-
-static void
-moddeinit(void)
-{
-	rb_event_delete(cleanup_monitor_ev);
-}
-
-static void
-add_monitor(struct Client *client_p, const char *nicks)
-{
-	char onbuf[BUFSIZE], offbuf[BUFSIZE];
-	struct Client *target_p;
-	struct monitor *monptr;
-	const char *name;
-	char *tmp;
-	char *p;
-	char *onptr, *offptr;
-	int mlen, arglen;
-	int cur_onlen, cur_offlen;
-
-	/* these two are same length, just diff numeric */
-	cur_offlen = cur_onlen = mlen = rb_sprintf(onbuf, form_str(RPL_MONONLINE),
-						   me.name, client_p->name, "");
-	rb_sprintf(offbuf, form_str(RPL_MONOFFLINE), me.name, client_p->name, "");
-
-	onptr = onbuf + mlen;
-	offptr = offbuf + mlen;
-
-	tmp = LOCAL_COPY(nicks);
-
-	for(name = rb_strtok_r(tmp, ",", &p); name; name = rb_strtok_r(NULL, ",", &p))
-	{
-		if(EmptyString(name) || strlen(name) > NICKLEN - 1)
-			continue;
-
-		if((int)rb_dlink_list_length(&client_p->localClient->monitor_list) >=
-		   ConfigFileEntry.max_monitor)
-		{
-			char buf[100];
-
-			if(cur_onlen != mlen)
-				sendto_one_buffer(client_p, onbuf);
-			if(cur_offlen != mlen)
-				sendto_one_buffer(client_p, offbuf);
-
-			if(p)
-				rb_snprintf(buf, sizeof(buf), "%s,%s", name, p);
-			else
-				rb_snprintf(buf, sizeof(buf), "%s", name);
-
-			sendto_one(client_p, form_str(ERR_MONLISTFULL),
-				   me.name, client_p->name, ConfigFileEntry.max_monitor, buf);
-			return;
-		}
-
-		monptr = find_monitor(name, 1);
-
-		/* already monitoring this nick */
-		if(rb_dlinkFind(client_p, &monptr->users))
-			continue;
-
-		rb_dlinkAddAlloc(client_p, &monptr->users);
-		rb_dlinkAddAlloc(monptr, &client_p->localClient->monitor_list);
-
-		if((target_p = find_named_person(name)) != NULL)
-		{
-			if(cur_onlen + strlen(target_p->name) +
-			   strlen(target_p->username) + strlen(target_p->host) + 3 >= BUFSIZE - 3)
-			{
-				sendto_one_buffer(client_p, onbuf);
-				cur_onlen = mlen;
-				onptr = onbuf + mlen;
-			}
-
-			if(cur_onlen != mlen)
-			{
-				*onptr++ = ',';
-				cur_onlen++;
-			}
-			arglen = rb_sprintf(onptr, "%s!%s@%s",
-					    target_p->name, target_p->username, target_p->host);
-			onptr += arglen;
-			cur_onlen += arglen;
-		}
-		else
-		{
-			if(cur_offlen + strlen(name) + 1 >= BUFSIZE - 3)
-			{
-				sendto_one_buffer(client_p, offbuf);
-				cur_offlen = mlen;
-				offptr = offbuf + mlen;
-			}
-
-			if(cur_offlen != mlen)
-			{
-				*offptr++ = ',';
-				cur_offlen++;
-			}
-			arglen = rb_sprintf(offptr, "%s", name);
-			offptr += arglen;
-			cur_offlen += arglen;
-		}
-	}
-
-	if(cur_onlen != mlen)
-		sendto_one_buffer(client_p, onbuf);
-	if(cur_offlen != mlen)
-		sendto_one_buffer(client_p, offbuf);
-}
-
-static void
-del_monitor(struct Client *client_p, const char *nicks)
-{
-	struct monitor *monptr;
-	const char *name;
-	char *tmp;
-	char *p;
-
-	if(!rb_dlink_list_length(&client_p->localClient->monitor_list))
-		return;
-
-	tmp = LOCAL_COPY(nicks);
-
-	for(name = rb_strtok_r(tmp, ",", &p); name; name = rb_strtok_r(NULL, ",", &p))
-	{
-		if(EmptyString(name))
-			continue;
-
-		/* not monitored */
-		if((monptr = find_monitor(name, 0)) == NULL)
-			continue;
-
-		rb_dlinkFindDestroy(client_p, &monptr->users);
-		rb_dlinkFindDestroy(monptr, &client_p->localClient->monitor_list);
-	}
-}
-
-static void
-list_monitor(struct Client *client_p)
-{
-	char buf[BUFSIZE];
-	struct monitor *monptr;
-	char *nbuf;
-	rb_dlink_node *ptr;
-	int mlen, arglen, cur_len;
-
-	if(!rb_dlink_list_length(&client_p->localClient->monitor_list))
-	{
-		sendto_one(client_p, form_str(RPL_ENDOFMONLIST), me.name, client_p->name);
-		return;
-	}
-
-	cur_len = mlen = rb_sprintf(buf, form_str(RPL_MONLIST), me.name, client_p->name, "");
-	nbuf = buf + mlen;
-	SetCork(client_p);
-	RB_DLINK_FOREACH(ptr, client_p->localClient->monitor_list.head)
-	{
-		monptr = ptr->data;
-
-		if(cur_len + strlen(monptr->name) + 1 >= BUFSIZE - 3)
-		{
-			sendto_one_buffer(client_p, buf);
-			nbuf = buf + mlen;
-			cur_len = mlen;
-		}
-
-		if(cur_len != mlen)
-		{
-			*nbuf++ = ',';
-			cur_len++;
-		}
-		arglen = rb_sprintf(nbuf, "%s", monptr->name);
-		cur_len += arglen;
-		nbuf += arglen;
-	}
-
-	sendto_one_buffer(client_p, buf);
-	ClearCork(client_p);
-	sendto_one(client_p, form_str(RPL_ENDOFMONLIST), me.name, client_p->name);
-}
-
-static void
-show_monitor_status(struct Client *client_p)
-{
-	char onbuf[BUFSIZE], offbuf[BUFSIZE];
-	struct Client *target_p;
-	struct monitor *monptr;
-	char *onptr, *offptr;
-	int cur_onlen, cur_offlen;
-	int mlen, arglen;
-	rb_dlink_node *ptr;
-
-	mlen = cur_onlen = rb_sprintf(onbuf, form_str(RPL_MONONLINE), me.name, client_p->name, "");
-	cur_offlen = rb_sprintf(offbuf, form_str(RPL_MONOFFLINE), me.name, client_p->name, "");
-
-	onptr = onbuf + mlen;
-	offptr = offbuf + mlen;
-	SetCork(client_p);
-	RB_DLINK_FOREACH(ptr, client_p->localClient->monitor_list.head)
-	{
-		monptr = ptr->data;
-
-		if((target_p = find_named_person(monptr->name)) != NULL)
-		{
-			if(cur_onlen + strlen(target_p->name) +
-			   strlen(target_p->username) + strlen(target_p->host) + 3 >= BUFSIZE - 3)
-			{
-				sendto_one_buffer(client_p, onbuf);
-				cur_onlen = mlen;
-				onptr = onbuf + mlen;
-			}
-
-			if(cur_onlen != mlen)
-			{
-				*onptr++ = ',';
-				cur_onlen++;
-			}
-			arglen = rb_sprintf(onptr, "%s!%s@%s",
-					    target_p->name, target_p->username, target_p->host);
-			onptr += arglen;
-			cur_onlen += arglen;
-		}
-		else
-		{
-			if(cur_offlen + strlen(monptr->name) + 1 >= BUFSIZE - 3)
-			{
-				sendto_one_buffer(client_p, offbuf);
-				cur_offlen = mlen;
-				offptr = offbuf + mlen;
-			}
-
-			if(cur_offlen != mlen)
-			{
-				*offptr++ = ',';
-				cur_offlen++;
-			}
-
-			arglen = rb_sprintf(offptr, "%s", monptr->name);
-			offptr += arglen;
-			cur_offlen += arglen;
-		}
-	}
-
-	ClearCork(client_p);
-	if(cur_onlen != mlen)
-		sendto_one_buffer(client_p, onbuf);
-	if(cur_offlen != mlen)
-		sendto_one_buffer(client_p, offbuf);
-}
-
-
-static void
-cleanup_monitor(void *unused)
-{
-	struct monitor *last_ptr = NULL;
-	struct monitor *next_ptr, *ptr;
-	int i;
-
-	for(i = 0; i < MONITOR_HASH_SIZE; i++)
-	{
-		last_ptr = NULL;
-		for(ptr = monitorTable[i]; ptr; ptr = next_ptr)
-		{
-			next_ptr = ptr->hnext;
-
-			if(!rb_dlink_list_length(&ptr->users))
-			{
-				if(last_ptr)
-					last_ptr->hnext = next_ptr;
-				else
-					monitorTable[i] = next_ptr;
-
-				free_monitor(ptr);
-			}
-			else
-				last_ptr = ptr;
-		}
-	}
-}
-
-
-static int
-m_monitor(struct Client *client_p, struct Client *source_p, int parc, const char *parv[])
-{
-	switch (parv[1][0])
-	{
-	case '+':
-		if(parc < 3 || EmptyString(parv[2]))
-		{
-			sendto_one(client_p, form_str(ERR_NEEDMOREPARAMS),
-				   me.name, source_p->name, "MONITOR");
-			return 0;
-		}
-
-		add_monitor(source_p, parv[2]);
-		break;
-	case '-':
-		if(parc < 3 || EmptyString(parv[2]))
-		{
-			sendto_one(client_p, form_str(ERR_NEEDMOREPARAMS),
-				   me.name, source_p->name, "MONITOR");
-			return 0;
-		}
-
-		del_monitor(source_p, parv[2]);
-		break;
-
-	case 'C':
-	case 'c':
-		clear_monitor(source_p);
-		break;
-
-	case 'L':
-	case 'l':
-		list_monitor(source_p);
-		break;
-
-	case 'S':
-	case 's':
-		show_monitor_status(source_p);
-		break;
-
-	default:
-		break;
-	}
-
-	return 0;
-}
diff --git a/modules/m_services.c b/modules/m_services.c
index 4449b5c..d74aa21 100644
--- a/modules/m_services.c
+++ b/modules/m_services.c
@@ -45,7 +45,6 @@
 #include "modules.h"
 #include "match.h"
 #include "whowas.h"
-#include "monitor.h"
 #include "s_serv.h"
 
 static int me_su(struct Client *, struct Client *, int, const char **);
@@ -194,8 +193,6 @@ me_rsfnc(struct Client *client_p, struct Client *source_p, int parc, const char
 
 	target_p->tsinfo = newts;
 
-	monitor_signoff(target_p);
-
 	invalidate_bancache_user(target_p);
 
 	sendto_realops_flags(UMODE_NCHANGE, L_ALL,
@@ -215,8 +212,6 @@ me_rsfnc(struct Client *client_p, struct Client *source_p, int parc, const char
 	strcpy(target_p->user->name, parv[2]);
 	add_to_hash(HASH_CLIENT, target_p->name, target_p);
 
-	monitor_signon(target_p);
-
 	del_all_accepts(target_p);
 	rb_snprintf(note, sizeof(note), "Nick: %s", target_p->name);
 	rb_note(target_p->localClient->F, note);
diff --git a/modules/static_modules.c b/modules/static_modules.c
index 7f68540..623b9e8 100644
--- a/modules/static_modules.c
+++ b/modules/static_modules.c
@@ -49,7 +49,6 @@ extern struct mapi_header_av1 m_list_mheader;
 extern struct mapi_header_av1 m_locops_mheader;
 extern struct mapi_header_av1 m_lusers_mheader;
 extern struct mapi_header_av1 m_map_mheader;
-extern struct mapi_header_av1 m_monitor_mheader;
 extern struct mapi_header_av1 m_motd_mheader;
 extern struct mapi_header_av1 m_names_mheader;
 extern struct mapi_header_av1 m_oper_mheader;
@@ -115,7 +114,6 @@ const struct mapi_header_av1 *static_mapi_headers[] = {
 	&m_locops_mheader,
 	&m_lusers_mheader,
 	&m_map_mheader,
-	&m_monitor_mheader,
 	&m_motd_mheader,
 	&m_names_mheader,
 	&m_oper_mheader,
diff --git a/resolver/Makefile.in b/resolver/Makefile.in
index 15a1bb4..adcd321 100644
--- a/resolver/Makefile.in
+++ b/resolver/Makefile.in
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.11.3 from Makefile.am.
+# Makefile.in generated by automake 1.11.6 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -16,6 +16,23 @@
 @SET_MAKE@
 
 VPATH = @srcdir@
+am__make_dryrun = \
+  { \
+    am__dry=no; \
+    case $$MAKEFLAGS in \
+      *\\[\ \	]*) \
+        echo 'am--echo: ; @echo "AM"  OK' | $(MAKE) -f - 2>/dev/null \
+          | grep '^AM OK$$' >/dev/null || am__dry=yes;; \
+      *) \
+        for am__flg in $$MAKEFLAGS; do \
+          case $$am__flg in \
+            *=*|--*) ;; \
+            *n*) am__dry=yes; break;; \
+          esac; \
+        done;; \
+    esac; \
+    test $$am__dry = yes; \
+  }
 pkgdatadir = $(datadir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
@@ -72,6 +89,11 @@ LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	$(LDFLAGS) -o $@
 SOURCES = $(resolver_SOURCES)
 DIST_SOURCES = $(am__resolver_SOURCES_DIST)
+am__can_run_installinfo = \
+  case $$AM_UPDATE_INFO_DIR in \
+    n|no|NO) false;; \
+    *) (install-info --version) >/dev/null 2>&1;; \
+  esac
 ETAGS = etags
 CTAGS = ctags
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
@@ -124,8 +146,6 @@ LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
 LOG_DIR = @LOG_DIR@
-LTDLDEPS = @LTDLDEPS@
-LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
 LT_OBJDIR = @LT_OBJDIR@
 MAINT = @MAINT@
@@ -215,6 +235,7 @@ pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 psdir = @psdir@
+runstatedir = @runstatedir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 srcdir = @srcdir@
@@ -265,8 +286,11 @@ $(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
 $(am__aclocal_m4_deps):
 install-libexecPROGRAMS: $(libexec_PROGRAMS)
 	@$(NORMAL_INSTALL)
-	test -z "$(libexecdir)" || $(MKDIR_P) "$(DESTDIR)$(libexecdir)"
 	@list='$(libexec_PROGRAMS)'; test -n "$(libexecdir)" || list=; \
+	if test -n "$$list"; then \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(libexecdir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(libexecdir)" || exit 1; \
+	fi; \
 	for p in $$list; do echo "$$p $$p"; done | \
 	sed 's/$(EXEEXT)$$//' | \
 	while read p p1; do if test -f $$p || test -f $$p1; \
diff --git a/src/Makefile.am b/src/Makefile.am
index 2649b26..0458786 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -36,7 +36,6 @@ libcore_la_SOURCES =			\
 	listener.c			\
 	match.c				\
 	modules.c			\
-	monitor.c			\
 	newconf.c			\
 	numeric.c			\
 	operhash.c			\
diff --git a/src/Makefile.in b/src/Makefile.in
index 71766e5..222d8ea 100644
--- a/src/Makefile.in
+++ b/src/Makefile.in
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.11.3 from Makefile.am.
+# Makefile.in generated by automake 1.11.6 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -16,6 +16,23 @@
 @SET_MAKE@
 
 VPATH = @srcdir@
+am__make_dryrun = \
+  { \
+    am__dry=no; \
+    case $$MAKEFLAGS in \
+      *\\[\ \	]*) \
+        echo 'am--echo: ; @echo "AM"  OK' | $(MAKE) -f - 2>/dev/null \
+          | grep '^AM OK$$' >/dev/null || am__dry=yes;; \
+      *) \
+        for am__flg in $$MAKEFLAGS; do \
+          case $$am__flg in \
+            *=*|--*) ;; \
+            *n*) am__dry=yes; break;; \
+          esac; \
+        done;; \
+    esac; \
+    test $$am__dry = yes; \
+  }
 pkgdatadir = $(datadir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
@@ -78,11 +95,11 @@ LTLIBRARIES = $(libcore_LTLIBRARIES)
 am__DEPENDENCIES_1 =
 am_libcore_la_OBJECTS = dns.lo bandbi.lo cache.lo channel.lo class.lo \
 	client.lo getopt.lo hash.lo hook.lo hostmask.lo ircd.lo \
-	ircd_signal.lo listener.lo match.lo modules.lo monitor.lo \
-	newconf.lo numeric.lo operhash.lo packet.lo parse.lo reject.lo \
-	restart.lo s_auth.lo s_conf.lo s_newconf.lo s_log.lo s_serv.lo \
-	s_user.lo scache.lo send.lo sslproc.lo supported.lo whowas.lo \
-	version.lo ircd_parser.lo ircd_lexer.lo
+	ircd_signal.lo listener.lo match.lo modules.lo newconf.lo \
+	numeric.lo operhash.lo packet.lo parse.lo reject.lo restart.lo \
+	s_auth.lo s_conf.lo s_newconf.lo s_log.lo s_serv.lo s_user.lo \
+	scache.lo send.lo sslproc.lo supported.lo whowas.lo version.lo \
+	ircd_parser.lo ircd_lexer.lo
 libcore_la_OBJECTS = $(am_libcore_la_OBJECTS)
 libcore_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
@@ -111,6 +128,11 @@ LTYACCCOMPILE = $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=compile $(YACC) $(AM_YFLAGS) $(YFLAGS)
 SOURCES = $(libcore_la_SOURCES)
 DIST_SOURCES = $(libcore_la_SOURCES)
+am__can_run_installinfo = \
+  case $$AM_UPDATE_INFO_DIR in \
+    n|no|NO) false;; \
+    *) (install-info --version) >/dev/null 2>&1;; \
+  esac
 ETAGS = etags
 CTAGS = ctags
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
@@ -163,8 +185,6 @@ LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
 LOG_DIR = @LOG_DIR@
-LTDLDEPS = @LTDLDEPS@
-LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
 LT_OBJDIR = @LT_OBJDIR@
 MAINT = @MAINT@
@@ -254,6 +274,7 @@ pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 psdir = @psdir@
+runstatedir = @runstatedir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 srcdir = @srcdir@
@@ -286,7 +307,6 @@ libcore_la_SOURCES = \
 	listener.c			\
 	match.c				\
 	modules.c			\
-	monitor.c			\
 	newconf.c			\
 	numeric.c			\
 	operhash.c			\
@@ -352,7 +372,6 @@ $(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
 $(am__aclocal_m4_deps):
 install-libcoreLTLIBRARIES: $(libcore_LTLIBRARIES)
 	@$(NORMAL_INSTALL)
-	test -z "$(libcoredir)" || $(MKDIR_P) "$(DESTDIR)$(libcoredir)"
 	@list='$(libcore_LTLIBRARIES)'; test -n "$(libcoredir)" || list=; \
 	list2=; for p in $$list; do \
 	  if test -f $$p; then \
@@ -360,6 +379,8 @@ install-libcoreLTLIBRARIES: $(libcore_LTLIBRARIES)
 	  else :; fi; \
 	done; \
 	test -z "$$list2" || { \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(libcoredir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(libcoredir)" || exit 1; \
 	  echo " $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 '$(DESTDIR)$(libcoredir)'"; \
 	  $(LIBTOOL) $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=install $(INSTALL) $(INSTALL_STRIP_FLAG) $$list2 "$(DESTDIR)$(libcoredir)"; \
 	}
@@ -410,7 +431,6 @@ distclean-compile:
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/listener.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/match.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/modules.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/monitor.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/newconf.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/numeric.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/operhash.Plo@am__quote@
diff --git a/src/client.c b/src/client.c
index 42c8457..afdf507 100644
--- a/src/client.c
+++ b/src/client.c
@@ -49,7 +49,6 @@
 #include "listener.h"
 #include "reject.h"
 #include "hook.h"
-#include "monitor.h"
 #include "parse.h"
 #include "sslproc.h"
 
@@ -1116,7 +1115,6 @@ exit_generic_client(struct Client *source_p, const char *comment)
 	add_history(source_p, 0);
 	off_history(source_p);
 
-	monitor_signoff(source_p);
 	dec_global_cidr_count(source_p);
 	if(has_id(source_p))
 		del_from_hash(HASH_ID, source_p->id, source_p);
@@ -1348,7 +1346,6 @@ exit_local_client(struct Client *client_p, struct Client *source_p, struct Clien
 	char tbuf[26];
 
 	exit_generic_client(source_p, comment);
-	clear_monitor(source_p);
 
 	s_assert(IsClient(source_p));
 	rb_dlinkDelete(&source_p->localClient->tnode, &lclient_list);
diff --git a/src/ircd.c b/src/ircd.c
index a31138c..1d5b36b 100644
--- a/src/ircd.c
+++ b/src/ircd.c
@@ -56,7 +56,6 @@
 #include "s_conf.h"
 #include "s_newconf.h"
 #include "cache.h"
-#include "monitor.h"
 #include "dns.h"
 #include "bandbi.h"
 #include "sslproc.h"
@@ -673,7 +672,6 @@ ratbox_main(int argc, char *argv[])
 	init_hook();
 	init_reject();
 	init_cache();
-	init_monitor();
 	init_isupport();
 #ifdef STATIC_MODULES
 	load_static_modules();
diff --git a/src/monitor.c b/src/monitor.c
deleted file mode 100644
index 99afb98..0000000
--- a/src/monitor.c
+++ /dev/null
@@ -1,154 +0,0 @@
-/*
- * ircd-ratbox: an advanced Internet Relay Chat Daemon(ircd).
- * monitor.c - Code for server-side notify lists
- *
- * Copyright (C) 2005 Lee Hardy <lee -at- leeh.co.uk>
- * Copyright (C) 2005-2012 ircd-ratbox development team
- *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions are
- * met:
- *
- * 1.Redistributions of source code must retain the above copyright notice,
- *   this list of conditions and the following disclaimer.
- * 2.Redistributions in binary form must reproduce the above copyright
- *   notice, this list of conditions and the following disclaimer in the
- *   documentation and/or other materials provided with the distribution.
- * 3.The name of the author may not be used to endorse or promote products
- *   derived from this software without specific prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
- * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
- * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
- * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
- * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
- * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
- * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
- * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
- * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
- * POSSIBILITY OF SUCH DAMAGE.
- *
- * $Id$
- */
-#include "stdinc.h"
-#include "struct.h"
-#include "monitor.h"
-#include "hash.h"
-#include "numeric.h"
-#include "ircd.h"
-#include "match.h"
-#include "send.h"
-
-struct monitor *monitorTable[MONITOR_HASH_SIZE];
-static rb_bh *monitor_heap;
-
-void
-init_monitor(void)
-{
-	monitor_heap = rb_bh_create(sizeof(struct monitor), MONITOR_HEAP_SIZE, "monitor_heap");
-}
-
-static inline unsigned int
-hash_monitor_nick(const char *name)
-{
-	return fnv_hash_upper((const unsigned char *)name, MONITOR_HASH_BITS, 0);
-}
-
-struct monitor *
-find_monitor(const char *name, int add)
-{
-	struct monitor *monptr;
-
-	unsigned int hashv = hash_monitor_nick(name);
-
-	for(monptr = monitorTable[hashv]; monptr; monptr = monptr->hnext)
-	{
-		if(!irccmp(monptr->name, name))
-			return monptr;
-	}
-
-	if(add)
-	{
-		monptr = rb_bh_alloc(monitor_heap);
-		rb_strlcpy(monptr->name, name, sizeof(monptr->name));
-
-		monptr->hnext = monitorTable[hashv];
-		monitorTable[hashv] = monptr;
-
-		return monptr;
-	}
-
-	return NULL;
-}
-
-void
-free_monitor(struct monitor *monptr)
-{
-	rb_bh_free(monitor_heap, monptr);
-}
-
-
-/* monitor_signon()
- *
- * inputs	- client who has just connected
- * outputs	-
- * side effects	- notifies any clients monitoring this nickname that it has
- * 		  connected to the network
- */
-void
-monitor_signon(struct Client *client_p)
-{
-	char buf[USERHOST_REPLYLEN];
-	struct monitor *monptr = find_monitor(client_p->name, 0);
-
-	/* noones watching this nick */
-	if(monptr == NULL)
-		return;
-
-	rb_snprintf(buf, sizeof(buf), "%s!%s@%s", client_p->name, client_p->username,
-		    client_p->host);
-
-	sendto_monitor(monptr, form_str(RPL_MONONLINE), me.name, "*", buf);
-}
-
-/* monitor_signoff()
- *
- * inputs	- client who is exiting
- * outputs	-
- * side effects	- notifies any clients monitoring this nickname that it has
- * 		  left the network
- */
-void
-monitor_signoff(struct Client *client_p)
-{
-	struct monitor *monptr = find_monitor(client_p->name, 0);
-
-	/* noones watching this nick */
-	if(monptr == NULL)
-		return;
-
-	sendto_monitor(monptr, form_str(RPL_MONOFFLINE), me.name, "*", client_p->name);
-}
-
-
-void
-clear_monitor(struct Client *client_p)
-{
-	struct monitor *monptr;
-	rb_dlink_node *ptr, *next_ptr;
-
-	RB_DLINK_FOREACH_SAFE(ptr, next_ptr, client_p->localClient->monitor_list.head)
-	{
-		monptr = ptr->data;
-
-		/* we leave the actual entry around with no users, itll be
-		 * cleaned up periodically by cleanup_monitor() --anfl
-		 */
-		rb_dlinkFindDestroy(client_p, &monptr->users);
-		rb_free_rb_dlink_node(ptr);
-	}
-
-	client_p->localClient->monitor_list.head = client_p->localClient->monitor_list.tail = NULL;
-	client_p->localClient->monitor_list.length = 0;
-}
diff --git a/src/newconf.c b/src/newconf.c
index 682ffd9..346e93d 100644
--- a/src/newconf.c
+++ b/src/newconf.c
@@ -2372,7 +2372,6 @@ static struct conf_items conf_general_table[] =
 	{ "kline_with_reason",	CF_YESNO, NULL, 0, &ConfigFileEntry.kline_with_reason	},
 	{ "map_oper_only",	CF_YESNO, NULL, 0, &ConfigFileEntry.map_oper_only	},
 	{ "max_accept",		CF_INT,   NULL, 0, &ConfigFileEntry.max_accept		},
-	{ "max_monitor",	CF_INT,   NULL, 0, &ConfigFileEntry.max_monitor		},
 	{ "max_nick_time",	CF_TIME,  NULL, 0, &ConfigFileEntry.max_nick_time	},
 	{ "max_nick_changes",	CF_INT,   NULL, 0, &ConfigFileEntry.max_nick_changes	},
 	{ "max_targets",	CF_INT,   NULL, 0, &ConfigFileEntry.max_targets		},
diff --git a/src/s_conf.c b/src/s_conf.c
index 0318abb..ed456c8 100644
--- a/src/s_conf.c
+++ b/src/s_conf.c
@@ -747,7 +747,6 @@ set_default_conf(void)
 	ConfigFileEntry.max_nick_time = 20;
 	ConfigFileEntry.max_nick_changes = 5;
 	ConfigFileEntry.max_accept = 20;
-	ConfigFileEntry.max_monitor = 60;
 	ConfigFileEntry.nick_delay = 900;	/* 15 minutes */
 	ConfigFileEntry.target_change = YES;
 	ConfigFileEntry.collision_fnc = NO;
diff --git a/src/s_user.c b/src/s_user.c
index 2ce710f..2498f33 100644
--- a/src/s_user.c
+++ b/src/s_user.c
@@ -49,7 +49,6 @@
 #include "reject.h"
 #include "cache.h"
 #include "hook.h"
-#include "monitor.h"
 
 static void report_and_set_user_flags(struct Client *, struct ConfItem *);
 void user_welcome(struct Client *source_p);
@@ -522,7 +521,6 @@ register_local_user(struct Client *client_p, struct Client *source_p, const char
 		USED_TARGETS(source_p) = 6;
 
 	inc_global_cidr_count(client_p);
-	monitor_signon(source_p);
 	user_welcome(source_p);
 	introduce_client(client_p, source_p);
 	return 0;
diff --git a/src/send.c b/src/send.c
index f67d455..e81e185 100644
--- a/src/send.c
+++ b/src/send.c
@@ -39,7 +39,6 @@
 #include "s_newconf.h"
 #include "s_log.h"
 #include "hook.h"
-#include "monitor.h"
 
 #define LOG_BUFSIZE 2048
 
@@ -812,40 +811,6 @@ sendto_match_servs(struct Client *source_p, const char *mask, int cap,
 	rb_linebuf_donebuf(&rb_linebuf_name);
 }
 
-/* sendto_monitor()
- *
- * inputs	- monitor nick to send to, format, va_args
- * outputs	- message to local users monitoring the given nick
- * side effects -
- */
-void
-sendto_monitor(struct monitor *monptr, const char *pattern, ...)
-{
-	va_list args;
-	buf_head_t linebuf;
-	struct Client *target_p;
-	rb_dlink_node *ptr;
-	rb_dlink_node *next_ptr;
-
-	rb_linebuf_newbuf(&linebuf);
-
-	va_start(args, pattern);
-	rb_linebuf_putmsg(&linebuf, pattern, &args, NULL);
-	va_end(args);
-
-	RB_DLINK_FOREACH_SAFE(ptr, next_ptr, monptr->users.head)
-	{
-		target_p = ptr->data;
-
-		if(IsIOError(target_p))
-			continue;
-
-		send_linebuf(target_p, &linebuf);
-	}
-
-	rb_linebuf_donebuf(&linebuf);
-}
-
 /* sendto_anywhere()
  *
  * inputs	- target, source, va_args
diff --git a/src/supported.c b/src/supported.c
index 607377e..1e41f05 100644
--- a/src/supported.c
+++ b/src/supported.c
@@ -253,7 +253,7 @@ isupport_targmax(const void *ptr)
 	static char result[200];
 
 	rb_snprintf(result, sizeof result,
-		    "NAMES:1,LIST:1,KICK:1,WHOIS:1,PRIVMSG:%d,NOTICE:%d,ACCEPT:,MONITOR:",
+		    "NAMES:1,LIST:1,KICK:1,WHOIS:1,PRIVMSG:%d,NOTICE:%d,ACCEPT:",
 		    ConfigFileEntry.max_targets, ConfigFileEntry.max_targets);
 	return result;
 }
@@ -288,7 +288,6 @@ init_isupport(void)
 	add_isupport("CPRIVMSG", isupport_string, "");
 	add_isupport("CNOTICE", isupport_string, "");
 	add_isupport("DEAF", isupport_string, "D");
-	add_isupport("MONITOR", isupport_intptr, &ConfigFileEntry.max_monitor);
 	add_isupport("FNC", isupport_string, "");
 	add_isupport("TARGMAX", isupport_targmax, NULL);
 }
diff --git a/ssld/Makefile.in b/ssld/Makefile.in
index 743e708..2902396 100644
--- a/ssld/Makefile.in
+++ b/ssld/Makefile.in
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.11.3 from Makefile.am.
+# Makefile.in generated by automake 1.11.6 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -16,6 +16,23 @@
 @SET_MAKE@
 
 VPATH = @srcdir@
+am__make_dryrun = \
+  { \
+    am__dry=no; \
+    case $$MAKEFLAGS in \
+      *\\[\ \	]*) \
+        echo 'am--echo: ; @echo "AM"  OK' | $(MAKE) -f - 2>/dev/null \
+          | grep '^AM OK$$' >/dev/null || am__dry=yes;; \
+      *) \
+        for am__flg in $$MAKEFLAGS; do \
+          case $$am__flg in \
+            *=*|--*) ;; \
+            *n*) am__dry=yes; break;; \
+          esac; \
+        done;; \
+    esac; \
+    test $$am__dry = yes; \
+  }
 pkgdatadir = $(datadir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
@@ -66,6 +83,11 @@ LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	$(LDFLAGS) -o $@
 SOURCES = $(ssld_SOURCES)
 DIST_SOURCES = $(ssld_SOURCES)
+am__can_run_installinfo = \
+  case $$AM_UPDATE_INFO_DIR in \
+    n|no|NO) false;; \
+    *) (install-info --version) >/dev/null 2>&1;; \
+  esac
 ETAGS = etags
 CTAGS = ctags
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
@@ -118,8 +140,6 @@ LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
 LOG_DIR = @LOG_DIR@
-LTDLDEPS = @LTDLDEPS@
-LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
 LT_OBJDIR = @LT_OBJDIR@
 MAINT = @MAINT@
@@ -209,6 +229,7 @@ pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 psdir = @psdir@
+runstatedir = @runstatedir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 srcdir = @srcdir@
@@ -258,8 +279,11 @@ $(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
 $(am__aclocal_m4_deps):
 install-libexecPROGRAMS: $(libexec_PROGRAMS)
 	@$(NORMAL_INSTALL)
-	test -z "$(libexecdir)" || $(MKDIR_P) "$(DESTDIR)$(libexecdir)"
 	@list='$(libexec_PROGRAMS)'; test -n "$(libexecdir)" || list=; \
+	if test -n "$$list"; then \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(libexecdir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(libexecdir)" || exit 1; \
+	fi; \
 	for p in $$list; do echo "$$p $$p"; done | \
 	sed 's/$(EXEEXT)$$//' | \
 	while read p p1; do if test -f $$p || test -f $$p1; \
diff --git a/tools/Makefile.in b/tools/Makefile.in
index 9769e40..799843c 100644
--- a/tools/Makefile.in
+++ b/tools/Makefile.in
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.11.3 from Makefile.am.
+# Makefile.in generated by automake 1.11.6 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
@@ -18,6 +18,23 @@
 # $Id$ 
 
 VPATH = @srcdir@
+am__make_dryrun = \
+  { \
+    am__dry=no; \
+    case $$MAKEFLAGS in \
+      *\\[\ \	]*) \
+        echo 'am--echo: ; @echo "AM"  OK' | $(MAKE) -f - 2>/dev/null \
+          | grep '^AM OK$$' >/dev/null || am__dry=yes;; \
+      *) \
+        for am__flg in $$MAKEFLAGS; do \
+          case $$am__flg in \
+            *=*|--*) ;; \
+            *n*) am__dry=yes; break;; \
+          esac; \
+        done;; \
+    esac; \
+    test $$am__dry = yes; \
+  }
 pkgdatadir = $(datadir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
@@ -68,6 +85,11 @@ LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	$(LDFLAGS) -o $@
 SOURCES = $(ratbox_mkpasswd_SOURCES)
 DIST_SOURCES = $(ratbox_mkpasswd_SOURCES)
+am__can_run_installinfo = \
+  case $$AM_UPDATE_INFO_DIR in \
+    n|no|NO) false;; \
+    *) (install-info --version) >/dev/null 2>&1;; \
+  esac
 ETAGS = etags
 CTAGS = ctags
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
@@ -120,8 +142,6 @@ LIBTOOL = @LIBTOOL@
 LIPO = @LIPO@
 LN_S = @LN_S@
 LOG_DIR = @LOG_DIR@
-LTDLDEPS = @LTDLDEPS@
-LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
 LT_OBJDIR = @LT_OBJDIR@
 MAINT = @MAINT@
@@ -211,6 +231,7 @@ pdfdir = @pdfdir@
 prefix = @prefix@
 program_transform_name = @program_transform_name@
 psdir = @psdir@
+runstatedir = @runstatedir@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 srcdir = @srcdir@
@@ -260,8 +281,11 @@ $(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
 $(am__aclocal_m4_deps):
 install-binPROGRAMS: $(bin_PROGRAMS)
 	@$(NORMAL_INSTALL)
-	test -z "$(bindir)" || $(MKDIR_P) "$(DESTDIR)$(bindir)"
 	@list='$(bin_PROGRAMS)'; test -n "$(bindir)" || list=; \
+	if test -n "$$list"; then \
+	  echo " $(MKDIR_P) '$(DESTDIR)$(bindir)'"; \
+	  $(MKDIR_P) "$(DESTDIR)$(bindir)" || exit 1; \
+	fi; \
 	for p in $$list; do echo "$$p $$p"; done | \
 	sed 's/$(EXEEXT)$$//' | \
 	while read p p1; do if test -f $$p || test -f $$p1; \
-- 
2.7.4

